var V=Object.defineProperty,R=Object.defineProperties;var S=Object.getOwnPropertyDescriptors;var A=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var D=(s,e,t)=>e in s?V(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,E=(s,e)=>{for(var t in e||(e={}))w.call(e,t)&&D(s,t,e[t]);if(A)for(var t of A(e))N.call(e,t)&&D(s,t,e[t]);return s},x=(s,e)=>R(s,S(e));import{A as k,f as q,m as z}from"./logo-Bd1KfhDG.js";import{d as H,r as C,_ as L,U as f,c as T,o as I,s as u,Z as j,w as a,q as b,b as F,X as h,Y as K,T as y,K as U,t as M,p as O,V as P}from"./index-DzJUk-4s.js";import{i as G}from"./icon-Bt2TghsQ.js";const X=H({__name:"AIChatInput",props:{sendTitle:{type:String,required:!1,default:""},inputTitle:{type:String,required:!1,default:""}},emits:["send"],setup(s,{expose:e,emit:t}){const n=C(null),{SendAltFilledIcon:m}=G.carbon,c=t,i=C(""),d=C(!1),l=C(!0),_=g=>{g.length?l.value=!1:l.value=!0},p=()=>{i.value&&(c("send",i.value.replace(/\n$/,"")),i.value="",d.value=!0)},v=g=>{i.value=g},o=()=>{d.value=!1},r=()=>{var g;(g=n.value)==null||g.focus()};e({setValue:v,unLoading:o,focus:r});const B={inputRef:n,SendAltFilledIcon:m,emit:c,text:i,loading:d,btnDisabled:l,inputHandle:_,sendHandle:p,setValue:v,unLoading:o,focus:r};return Object.defineProperty(B,"__isScriptSetup",{enumerable:!1,value:!0}),B}}),Y={class:"go-ai-chat-input"};function Z(s,e,t,n,m,c){const i=f("n-input"),d=f("n-icon"),l=f("n-button"),_=f("n-flex");return I(),T("div",Y,[u(i,{ref:"inputRef",value:n.text,"onUpdate:value":e[0]||(e[0]=p=>n.text=p),valueModifiers:{trim:!0},autofocus:!0,autosize:{minRows:3,maxRows:3},size:"small",type:"textarea",placeholder:t.inputTitle||"请输入描述（如：帮我获取所有用户的数量）",disabled:n.loading,onInput:n.inputHandle,onKeyup:j(n.sendHandle,["enter"])},null,8,["value","placeholder","disabled"]),u(_,{class:"go-mt-2",justify:"space-between"},{default:a(()=>[b("div",null,[F(s.$slots,"inputBottomLeft",{},void 0,!0)]),u(_,null,{default:a(()=>[F(s.$slots,"inputBottomRight",{},void 0,!0),u(l,{tertiary:"",type:"primary",size:"small",disabled:n.btnDisabled,loading:n.loading,onClick:n.sendHandle},{icon:a(()=>[u(d,null,{default:a(()=>[u(n.SendAltFilledIcon)]),_:1})]),default:a(()=>[h(" "+K(t.sendTitle||"发送（Enter）"),1)]),_:1},8,["disabled","loading"])]),_:3})]),_:3})])}const J=L(X,[["render",Z],["__scopeId","data-v-b82440fc"],["__file","AIChatInput.vue"]]),Q=H({__name:"DataBaseAIChat",props:{width:{},height:{},messageList:{},contentHeight:{},isVertical:{type:Boolean},hiddenBtn:{type:Boolean},inputTitle:{}},emits:["send","useResponse"],setup(s,{expose:e,emit:t}){const n=s;y("width",n.width),y("hiddenBtn",n.hiddenBtn),y("isVertical",n.isVertical);const m=t,c=C(),i=o=>o.map(r=>x(E({},r),{type:z[r.type]})),d=o=>{var r,B;(r=c.value)==null||r.setValue((o==null?void 0:o.trim())||""),(B=c.value)==null||B.focus()},l=o=>{m("send",o)},_=(o,r)=>{m("useResponse",o,r)},p=()=>{var o;(o=c.value)==null||o.unLoading()};e({unLoading:p,setValue:d});const v={props:n,emit:m,AIChatInputRef:c,handleTypeValue:i,editHandle:d,sendHandle:l,sqlHandle:_,unLoading:p,AIChatContent:q,AIChatInput:J,AILogo:k,get isNumber(){return U.isNumber}};return Object.defineProperty(v,"__isScriptSetup",{enumerable:!1,value:!0}),v}}),W={key:0,class:"no-date-content"},$={class:"chat-bottom"};function ee(s,e,t,n,m,c){const i=f("n-flex"),d=f("n-h1"),l=f("n-text"),_=f("n-card");return I(),M(_,{size:"small","content-style":{padding:0},style:{flex:"1"}},{default:a(()=>{var p;return[b("div",{class:"go-data-base-ai-chat",style:O({height:n.isNumber(t.height)?t.height+"px":t.height})},[u(n.AIChatContent,{contentHeight:t.contentHeight,messageList:n.handleTypeValue(t.messageList),onEdit:n.editHandle,onUseResponse:n.sqlHandle,style:{flex:"1"}},null,8,["contentHeight","messageList"]),!t.messageList||!((p=t.messageList)!=null&&p.length)?(I(),T("div",W,[u(d,null,{default:a(()=>[u(i,{align:"center"},{default:a(()=>[e[0]||(e[0]=h(" 欢迎使用 GoView AI ")),u(n.AILogo,{class:"ai-logo"})]),_:1})]),_:1}),u(l,{depth:3},{default:a(()=>e[1]||(e[1]=[h("该功能由AI提供支持，因此可能会存在错误，请在使用前仔细检查输出内容。")])),_:1}),F(s.$slots,"default",{},()=>[u(l,{class:"go-mt-1",depth:2},{default:a(()=>[e[3]||(e[3]=h("可")),u(l,{type:"info"},{default:a(()=>e[2]||(e[2]=[h("「关联数据表」")])),_:1}),e[4]||(e[4]=h("，提高结果准确率"))]),_:1})],!0)])):P("",!0),b("div",$,[F(s.$slots,"inputTop",{},void 0,!0),u(n.AIChatInput,{class:"go-mt-1",ref:"AIChatInputRef",inputTitle:t.inputTitle,onSend:n.sendHandle},{inputBottomLeft:a(()=>[F(s.$slots,"inputBottomLeft",{},void 0,!0)]),inputBottomRight:a(()=>[F(s.$slots,"inputBottomRight",{},void 0,!0)]),_:3},8,["inputTitle"])])],4)]}),_:3})}const ue=L(Q,[["render",ee],["__scopeId","data-v-d3b6bacd"],["__file","DataBaseAIChat.vue"]]);export{ue as D};
