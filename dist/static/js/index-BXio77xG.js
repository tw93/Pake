import{Y as k,Z as S,u as w}from"./index-B2h3DCGB.js";import{d as F,r as g,_ as b,U as l,b6 as x,c as v,o as c,s as e,t as D,w as s,q as n,X as a,W as I,V as M,bP as A,aI as V}from"./index-DzJUk-4s.js";import{g as h}from"./plugin-BZaVEG5Y.js";import{M as j}from"./index-DumZb7Zp.js";import{i as z}from"./icon-Bt2TghsQ.js";import"./file-BoGdIhh5.js";import"./systemStore-CDAOEx2u.js";import"./index-YIaHLc6Z.js";import"./fileTypeEnum-22QBGXO_.js";const N=F({__name:"InitEditSetting",props:{canvasConfig:{type:Object,required:!0}},setup(p,{expose:t}){t();const i=p,{EditIcon:o}=z.carbon,u=g(!1),d=g(""),f={props:i,EditIcon:o,showDataModal:u,editorCode:d,saveDataFn:()=>{i.canvasConfig.initCode=d,u.value=!1},showModalFn:()=>{d.value=i.canvasConfig.initCode||"",u.value=!0},closeDataModal:()=>{h({message:"确定不保存修改内容，关闭弹窗？",onPositiveCallback:async()=>{try{u.value=!1}catch(C){}}})},SettingItemBox:S,SettingItem:k,MonacoEditor:j};return Object.defineProperty(f,"__isScriptSetup",{enumerable:!1,value:!0}),f}}),P={key:0,class:"drag-modal drag-box go-background-filter"},q={class:"head-box"},O={class:"content-box"},U={class:"editor-code-filter"},G={class:"bottom-box"},T={class:"btn-box"};function R(p,t,i,o,u,d){const _=l("n-icon"),r=l("n-text"),m=l("n-tag"),f=l("n-button"),C=l("n-space"),E=x("dragModal"),B=x("resizable");return c(),v("div",null,[e(o.SettingItemBox,{name:"初始化",alone:!0},{default:s(()=>[e(o.SettingItem,{name:""},{default:s(()=>[n("div",{class:"edit-btn",onClick:o.showModalFn},[e(_,{style:{position:"relative",top:"2px"}},{default:s(()=>[e(o.EditIcon)]),_:1}),t[1]||(t[1]=a(" 点击编辑代码 "))])]),_:1})]),_:1}),(c(),D(A,{to:"body"},[o.showDataModal?I((c(),v("div",P,[t[8]||(t[8]=n("div",{class:"drag-overlay"},null,-1)),n("div",q,[e(r,null,{default:s(()=>t[2]||(t[2]=[a("初始化编辑器")])),_:1})]),n("div",O,[n("div",U,[e(m,{type:"info"},{default:s(()=>t[3]||(t[3]=[n("span",{class:"func-keyword"},"async function",-1),a("  "),n("span",{class:"func-name"},"initGlobalFunction",-1),a("()  { ")])),_:1}),e(o.MonacoEditor,{modelValue:o.editorCode,"onUpdate:modelValue":t[0]||(t[0]=y=>o.editorCode=y),width:"100%",height:"100%",language:"javascript"},null,8,["modelValue"]),e(m,{type:"info"},{default:s(()=>t[4]||(t[4]=[a("}")])),_:1})])]),n("div",G,[e(r,{class:"go-px-3",depth:3},{default:s(()=>t[5]||(t[5]=[a("注意：⚠️请不要在初始化时切换页面，否则可能会导致页面永远无法加载等BUG。初始化函数会堵塞画布渲染，请不要耗时太久。")])),_:1}),e(C,{"wrap-item":!1},{default:s(()=>[n("div",T,[e(f,{onClick:o.closeDataModal},{default:s(()=>t[6]||(t[6]=[a(" 关闭 ")])),_:1}),e(f,{type:"primary",onClick:o.saveDataFn},{default:s(()=>[e(r,{class:"go-px-3"},{default:s(()=>t[7]||(t[7]=[a("保存")])),_:1})]),_:1})])]),_:1})])])),[[E,{dragDiv:".head-box"}],[B]]):M("",!0)]))])}const W=b(N,[["render",R],["__scopeId","data-v-f3999abb"],["__file","InitEditSetting.vue"]]),X=F({__name:"index",setup(p,{expose:t}){t();const i=w(),{editCanvasConfig:o}=V(i),d={chartEditStore:i,editCanvasConfig:o,editContent:()=>{},InitEditSetting:W};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}}),Y={class:"canvas-edit-code-box"},Z={class:"list-item-box"},H={class:"list-top"},J={key:0,class:"list-item-left"},K={class:"code-model-box"};function L(p,t,i,o,u,d){const _=l("n-text"),r=l("n-code");return c(),v("div",Y,[e(o.InitEditSetting,{canvasConfig:o.editCanvasConfig},null,8,["canvasConfig"]),n("div",Z,[n("div",H,[e(_,{class:"title",depth:2,style:{"font-size":"13px"}},{default:s(()=>t[0]||(t[0]=[a(" 初始化代码 ")])),_:1})]),t[3]||(t[3]=n("div",{class:"divider-bg"},null,-1)),n("div",{class:"list-item go-transition-quick",onClick:o.editContent},[o.editCanvasConfig.initCode?(c(),v("div",J,[n("div",K,[e(r,{code:o.editCanvasConfig.initCode,language:"javascript","word-wrap":!0,style:{"font-size":"12px"}},null,8,["code"]),t[1]||(t[1]=n("div",{class:"code-model"},null,-1))])])):(c(),D(_,{key:1,depth:"3"},{default:s(()=>t[2]||(t[2]=[a("「暂无内容」")])),_:1}))])])])}const dt=b(X,[["render",L],["__scopeId","data-v-d7d715ac"],["__file","index.vue"]]);export{dt as default};
