const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["static/js/index-UR7qWGF4.js","static/js/index-B2h3DCGB.js","static/js/index-DzJUk-4s.js","static/css/index-BZJqFamK.css","static/js/plugin-BZaVEG5Y.js","static/js/icon-Bt2TghsQ.js","static/js/file-BoGdIhh5.js","static/js/systemStore-CDAOEx2u.js","static/js/index-DumZb7Zp.js","static/css/index-BZSqXE9v.css","static/js/index-YIaHLc6Z.js","static/js/fileTypeEnum-22QBGXO_.js","static/css/index-8Xm-dR8g.css"])))=>i.map(i=>d[i]);
var re=Object.defineProperty,se=Object.defineProperties;var ie=Object.getOwnPropertyDescriptors;var ee=Object.getOwnPropertySymbols;var de=Object.prototype.hasOwnProperty,ce=Object.prototype.propertyIsEnumerable;var oe=(b,o,v)=>o in b?re(b,o,{enumerable:!0,configurable:!0,writable:!0,value:v}):b[o]=v,K=(b,o)=>{for(var v in o||(o={}))de.call(o,v)&&oe(b,v,o[v]);if(ee)for(var v of ee(o))ce.call(o,v)&&oe(b,v,o[v]);return b},Q=(b,o)=>se(b,ie(o));import{d as le,a5 as ue,H as $,r as G,A as te,e as W,d7 as me,d8 as Ce,bd as _e,O as fe,aw as S,d4 as ve,f3 as pe,b2 as L,_ as ne,U as s,c as I,V as X,o as p,s as l,q as f,w as t,X as k,F as N,n as M,z as Y,W as ge,$ as he,p as J,aa as Z,t as z,Y as xe}from"./index-DzJUk-4s.js";import{u as ke,o as q,aF as be}from"./index-B2h3DCGB.js";import{g as j}from"./plugin-BZaVEG5Y.js";import{i as ae}from"./icon-Bt2TghsQ.js";import{l as ye}from"./index-DumZb7Zp.js";import"./file-BoGdIhh5.js";import"./systemStore-CDAOEx2u.js";import"./index-YIaHLc6Z.js";import"./fileTypeEnum-22QBGXO_.js";const Ee=le({__name:"index",props:{selectColor:Object,disabledChangeTitle:Boolean},emits:["updateColor"],setup(b,{expose:o,emit:v}){o(),ue(n=>({"5e9ccdfe":C.color}));const e=b,w=v,{AddIcon:P,TrashIcon:H,RepeatIcon:A}=ae.ionicons5,O=ye(()=>fe(()=>import("./index-UR7qWGF4.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]))),r=G(),i=G(void 0),C=$({index:-1,color:""});te(()=>{var n;return(n=e.selectColor)==null?void 0:n.id},()=>{var n;r.value=L(e.selectColor),C.index=0,C.color=(n=r.value)==null?void 0:n.color[0]},{immediate:!0,deep:!1});const d=W(()=>c(C.color)),c=n=>{if(!n)return{default:[],fade:[]};const m=36,y=[],F=[],a=[];for(let _=0;_<m;_++)F.unshift(me(n,1/100*(_+1))),y.push(Ce(n,3.5/100*(_+1)));return y.forEach((_,U)=>{a.unshift(_e(_,1/100*(U+1)))}),{default:[...F.reverse().splice(0,parseInt(`${m/2}`)-9),...y.splice(0,parseInt(`${m/2}`))],fade:a.reverse().splice(0,27)}},g=n=>({backgroundColor:n}),D=(n,m)=>{C.color=n,C.index=m},E=(n,m)=>{n&&(C.color=n),m&&(C.index=m),S(()=>{w("updateColor",r.value)})},u={props:e,emit:w,AddIcon:P,TrashIcon:H,RepeatIcon:A,CreateColorRenderChart:O,editColor:r,moveToIndex:i,targetColor:C,expandColorList:d,computedColorList:c,getRenderBackgroundColor:g,selectHandle:D,completeHandle:E,selectExpandColor:(n,m)=>{const y=m?ve(n):pe(n);r.value&&(r.value.color[C.index]=y),S(()=>{w("updateColor",r.value)})},addColor:()=>{var m,y,F;const n=((y=r.value)==null?void 0:y.color[((m=r.value)==null?void 0:m.color.length)-1])||"#2c2c31";(F=r.value)==null||F.color.push(n),S(()=>{w("updateColor",r.value)})},deleteColor:n=>{var m,y;(m=r.value)==null||m.color.splice(n,1),E((y=r.value)==null?void 0:y.color[n-1],n-1)},moveColor:(n,m)=>{var y;!((y=r.value)!=null&&y.color)||!i.value||(i.value<1?(r.value.color.splice(0,0,r.value.color.splice(m,1)[0]),C.index=0):i.value>r.value.color.length?(r.value.color.splice(r.value.color.length,0,r.value.color.splice(m,1)[0]),C.index=r.value.color.length-1):(r.value.color.splice(i.value-1,0,r.value.color.splice(m,1)[0]),C.index=i.value-1),C.color=n,S(()=>{w("updateColor",r.value)}))},titleChangeHandle:()=>{S(()=>{w("updateColor",r.value)})},get cloneDeep(){return L}};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}}),Ie={key:0,class:"create-color-setting"},we={class:"color-list-box go-mt-3","x-gap":12,"y-gap":12,cols:4},De={class:"go-flex-items-center"},Te={class:"expend-color-box"},He=["onClick"],Ae=["onClick"];function Be(b,o,v,e,w,P){const H=s("n-input-group-label"),A=s("n-input"),O=s("n-input-group"),r=s("n-tag"),i=s("n-space"),C=s("n-color-picker"),d=s("n-icon"),c=s("n-text"),g=s("n-input-number"),D=s("n-popconfirm"),E=s("n-tooltip"),R=s("n-button"),B=s("n-scrollbar"),h=s("n-card"),T=s("n-divider");return e.editColor?(p(),I("div",Ie,[l(h,{bordered:!1,role:"dialog",size:"small","aria-modal":"true"},{default:t(()=>[l(i,{justify:"space-between"},{default:t(()=>[l(O,null,{default:t(()=>[l(H,null,{default:t(()=>o[3]||(o[3]=[k("名称:")])),_:1}),l(A,{class:"create-color-name",value:e.editColor.name,"onUpdate:value":o[0]||(o[0]=x=>e.editColor.name=x),valueModifiers:{trim:!0},maxlength:"8","show-count":"",clearable:"",disabled:v.disabledChangeTitle,onChange:e.titleChangeHandle},null,8,["value","disabled"])]),_:1}),l(r,{type:"warning"},{default:t(()=>o[4]||(o[4]=[k("底部图表仅展示 7 条数据")])),_:1})]),_:1}),l(B,{style:{"max-height":"132px"}},{default:t(()=>[f("div",we,[(p(!0),I(N,null,M(e.editColor.color,(x,u)=>(p(),I("div",{class:"color-list-item",key:u},[f("div",{class:Y(["go-flex-items-center",{select:u===e.targetColor.index}])},[l(C,{style:{width:"95px"},value:e.editColor.color[u],"onUpdate:value":n=>e.editColor.color[u]=n,"show-preview":!0,modes:["hex"],onComplete:n=>e.completeHandle(n,u),"onUpdate:show":n=>e.selectHandle(x,u)},null,8,["value","onUpdate:value","onComplete","onUpdate:show"]),f("div",null,[l(E,{trigger:"hover"},{trigger:t(()=>[l(D,{"show-icon":!1,onPositiveClick:n=>e.moveColor(x,u),onNegativeClick:o[2]||(o[2]=n=>e.moveToIndex=void 0)},{trigger:t(()=>[l(d,{class:"go-ml-1 go-cursor-pointer",size:"14",depth:3},{default:t(()=>[l(e.RepeatIcon)]),_:1})]),default:t(()=>[l(i,null,{default:t(()=>[l(c,{style:{"font-size":"13px"}},{default:t(()=>o[5]||(o[5]=[k("移动到")])),_:1}),l(g,{min:"1",size:"small",value:e.moveToIndex,"onUpdate:value":o[1]||(o[1]=n=>e.moveToIndex=n),"show-button":!1,style:{width:"50px"},placeholder:"N"},null,8,["value"]),l(c,{style:{"font-size":"13px"}},{default:t(()=>o[6]||(o[6]=[k("项")])),_:1})]),_:1})]),_:2},1032,["onPositiveClick"])]),default:t(()=>[o[7]||(o[7]=k(" 移动位置 "))]),_:2},1024)]),ge(f("div",null,[l(E,{trigger:"hover"},{trigger:t(()=>[l(d,{class:"go-ml-1 go-cursor-pointer",size:"14",depth:3,onClick:n=>e.deleteColor(u)},{default:t(()=>[l(e.TrashIcon)]),_:2},1032,["onClick"])]),default:t(()=>[o[8]||(o[8]=k(" 删除颜色 "))]),_:2},1024)],512),[[he,u>5]])],2)]))),128)),f("div",null,[l(R,{type:"primary",secondary:"",onClick:e.addColor},{default:t(()=>[f("div",De,[o[9]||(o[9]=f("span",{class:"go-mr-4"},"添加",-1)),l(d,{size:"16"},{default:t(()=>[l(e.AddIcon)]),_:1})])]),_:1})])])]),_:1})]),_:1}),f("div",Te,[l(h,{class:"go-mt-3 expend-color",bordered:!1,role:"dialog",size:"small","aria-modal":"true"},{default:t(()=>[l(c,{style:{"font-size":"13px"}},{default:t(()=>o[10]||(o[10]=[k("默认扩展色：")])),_:1}),l(T,{style:{margin:"10px 0"}}),l(i,{size:[4,0],justify:"center"},{default:t(()=>[(p(!0),I(N,null,M(e.expandColorList.default,(x,u)=>(p(),I("div",{class:"color-computed-item",key:u,onClick:n=>e.selectExpandColor(x,!1)},[o[11]||(o[11]=f("div",{class:"n-color-picker-checkboard"},null,-1)),f("div",{style:J(e.getRenderBackgroundColor(x))},null,4)],8,He))),128))]),_:1})]),_:1}),l(h,{class:"go-mt-3 expend-color",bordered:!1,role:"dialog",size:"small","aria-modal":"true"},{default:t(()=>[l(c,{style:{"font-size":"13px"}},{default:t(()=>o[12]||(o[12]=[k("透明扩展色：")])),_:1}),l(T,{style:{margin:"10px 0"}}),l(i,{size:[4,0],justify:"center"},{default:t(()=>[(p(!0),I(N,null,M(e.expandColorList.fade,(x,u)=>(p(),I("div",{class:"color-computed-item",key:u,onClick:n=>e.selectExpandColor(x,!0)},[o[13]||(o[13]=f("div",{class:"n-color-picker-checkboard"},null,-1)),f("div",{style:J(e.getRenderBackgroundColor(x))},null,4)],8,Ae))),128))]),_:1})]),_:1})]),l(e.CreateColorRenderChart,{color:e.cloneDeep(e.editColor.color).splice(0,7)},null,8,["color"])])):X("",!0)}const Fe=ne(Ee,[["render",Be],["__scopeId","data-v-2034d214"],["__file","index.vue"]]),Oe=le({__name:"index",props:{modelShow:Boolean,targetData:{type:Object,required:!1},themeColor:{type:Object,required:!1}},emits:["update:modelShow","editSaveHandle"],setup(b,{expose:o,emit:v}){o();const e=b,w=v,{DuplicateOutlineIcon:P,TrashIcon:H,ArrowDownIcon:A,BarChartIcon:O}=ae.ionicons5,r={id:Z(),name:"未命名",color:["#6ae5bb","#69e3de","#5ac5ee","#5ac4ee","#4498ec","#3c7ddf"]},i=ke(),C=G(!1);let d=$(i.getEditCanvasConfig.chartCustomThemeColorInfo||[]);const c=G(void 0),g=$({selectInfo:d[0]});te(()=>e.modelShow,a=>{C.value=a,a&&(e!=null&&e.themeColor&&(e!=null&&e.targetData)&&d.unshift({id:Z(),name:e.targetData.chartConfig.title,color:L(e.themeColor.color)}),d.length&&(g.selectInfo=d[0]))});const D=W(()=>{var a;return(a=g==null?void 0:g.selectInfo)==null?void 0:a.id}),E=W(()=>d.findIndex(a=>a.id===D.value)),R=W(()=>i.getEditCanvasConfig.chartThemeColor),B=a=>{a.id!==D.value&&(c.value!==void 0?j({message:"当前有变动未保存，是否直接放弃修改？",onPositiveCallback:()=>{c.value=void 0,g.selectInfo=a}}):g.selectInfo=a)},h=()=>{const a=()=>{const _=Q(K({},L(r)),{id:Z()});g.selectInfo=_,d.push(_),B(_),c.value=_,u(!1),window.$message.success("创建成功，已保存到全局列表里！")};c.value!==void 0?j({message:"当前有变动未保存，是否直接放弃修改？",onPositiveCallback:()=>{c.value=void 0,a()}}):a()},T=a=>{const _=()=>{d.splice(a,1),i.setEditCanvasConfig(q.CHART_CUSTOM_THEME_COLOR_INFO,L(d)),S(()=>{d.length?B(d[a-1>-1?a-1:a]):g.selectInfo=void 0})};c.value!==void 0?j({message:"当前有变动未保存，是否直接放弃修改？",onPositiveCallback:()=>{c.value=void 0,_()}}):j({message:"是否删除此颜色？",onPositiveCallback:()=>{_()}})},x=a=>{c.value=a},u=(a=!0)=>{if(!c.value)return;const _=d.findIndex(U=>{var V;return U.id===((V=c.value)==null?void 0:V.id)});if(_!==-1){a&&window.$message.success("数据应用成功！");const U=L(Q(K({},c.value),{name:c.value.name||"未定义"}));if(d[_].color=U.color,d[_].name=U.name,c.value=void 0,e.themeColor&&E.value===0)return;const V=i.getEditCanvasConfig.chartThemeColor;i.setEditCanvasConfig(q.CHART_THEME_COLOR,"dark"),S(()=>{i.setEditCanvasConfig(q.CHART_CUSTOM_THEME_COLOR_INFO,L(d)),i.setEditCanvasConfig(q.CHART_THEME_COLOR,V)})}else window.$message.error("数据应用失败！")},n=()=>{var a;(a=e.targetData)!=null&&a.colors?(e.targetData.colors={color:d[E.value].color,name:e.targetData.chartConfig.title},window.$message.success("应用成功！"),m()):window.$message.error("应用失败，请联系管理员！")},m=()=>{const a=()=>{var _;c.value=void 0,g.selectInfo=void 0,(_=e.targetData)!=null&&_.colors&&d.shift(),w("update:modelShow",!1)};c.value!==void 0?j({message:"当前有变动未保存，是否直接放弃修改？",onPositiveCallback:()=>{a()}}):a()},F={props:e,emit:w,DuplicateOutlineIcon:P,TrashIcon:H,ArrowDownIcon:A,BarChartIcon:O,defaultColor:r,chartEditStore:i,modelShowRef:C,get colorList(){return d},set colorList(a){d=a},updateColor:c,selectColor:g,selectColorId:D,selectColorIndex:E,selectThemeColor:R,selectHandle:B,createColor:h,deleteHandle:T,updateColorHandle:x,saveHandle:u,selectColors:n,closeHandle:m,colorBackgroundImage:a=>`linear-gradient(to right, ${a.color[0]} 0%, ${a.color[5]} 100%)`,get noData(){return be},get CreateColorRender(){return Fe}};return Object.defineProperty(F,"__isScriptSetup",{enumerable:!1,value:!0}),F}}),Re={class:"create-content"},ze={class:"create-color-setting-box"},Se={key:1,class:"no-data go-flex-center"},Le=["src"],Ue={class:"color-list-box"},Pe={class:"color-list"},je={class:"go-flex-items-center"};function Ne(b,o,v,e,w,P){const H=s("n-text"),A=s("n-timeline-item"),O=s("n-timeline"),r=s("n-icon"),i=s("n-button"),C=s("n-badge"),d=s("n-space"),c=s("n-divider"),g=s("n-a"),D=s("n-ellipsis"),E=s("n-card"),R=s("n-tooltip"),B=s("n-modal");return p(),z(B,{class:"go-chart-create-color",show:e.modelShowRef,"onUpdate:show":o[1]||(o[1]=h=>e.modelShowRef=h),"mask-closable":!1,closeOnEsc:!1},{default:t(()=>[l(E,{bordered:!1,role:"dialog",size:"small","aria-modal":"true",style:{width:"900px",height:"720px"}},{header:t(()=>o[2]||(o[2]=[])),"header-extra":t(()=>o[3]||(o[3]=[])),action:t(()=>[l(d,{justify:"end"},{default:t(()=>[v.targetData?(p(),z(i,{key:0,type:"primary",onClick:o[0]||(o[0]=h=>e.selectColors())},{default:t(()=>o[11]||(o[11]=[k("应用此分组")])),_:1})):X("",!0),l(i,{onClick:e.closeHandle},{default:t(()=>o[12]||(o[12]=[k("关闭")])),_:1})]),_:1})]),default:t(()=>[f("div",Re,[f("div",ze,[e.selectColorId?(p(),z(e.CreateColorRender,{key:0,selectColor:e.selectColor.selectInfo,disabledChangeTitle:!!v.themeColor&&e.selectColorIndex===0,onUpdateColor:e.updateColorHandle},null,8,["selectColor","disabledChangeTitle"])):(p(),I("div",Se,[f("img",{src:e.noData,alt:"暂无数据"},null,8,Le),l(H,{depth:3},{default:t(()=>o[4]||(o[4]=[k("暂未选择自定义颜色")])),_:1})]))]),f("div",Ue,[l(O,{class:"pond-item-timeline",style:{width:"20px"}},{default:t(()=>[l(A,{type:"info"}),l(A,{type:"success"})]),_:1}),f("div",Pe,[l(d,null,{default:t(()=>[l(i,{class:Y(["create-btn",{"is-full":!e.selectColorId}]),type:"primary",ghost:!e.selectColorId,secondary:!!e.selectColorId,onClick:e.createColor},{icon:t(()=>[l(r,null,{default:t(()=>[l(e.DuplicateOutlineIcon)]),_:1})]),default:t(()=>[o[5]||(o[5]=f("span",null," 创建 ",-1))]),_:1},8,["class","ghost","secondary"]),e.selectColorId?(p(),z(C,{key:0,class:Y(["animate__pulse animate__infinite",{animate__animated:e.updateColor!==void 0}]),show:e.updateColor!==void 0,dot:""},{default:t(()=>[l(i,{class:"create-btn",type:"info",secondary:"",onClick:e.saveHandle},{icon:t(()=>[l(r,null,{default:t(()=>[l(e.ArrowDownIcon)]),_:1})]),default:t(()=>[o[6]||(o[6]=f("span",null," 保存数据 ",-1))]),_:1})]),_:1},8,["class","show"])):X("",!0)]),_:1}),l(c,{style:{margin:"10px 0"}}),e.selectColorId?X("",!0):(p(),z(H,{key:0,class:"not-data-text",depth:3},{default:t(()=>[o[8]||(o[8]=k(" 暂无自定义颜色， ")),l(g,{onClick:e.createColor},{default:t(()=>o[7]||(o[7]=[k("立即创建")])),_:1})]),_:1})),(p(!0),I(N,null,M(e.colorList,(h,T)=>{var x;return p(),I("div",{class:"color-card-box",key:T},[l(E,{class:Y(["color-card",{selected:h.id===e.selectColorId}]),size:"small",hoverable:"",embedded:"",onClick:u=>e.selectHandle(h)},{default:t(()=>[f("div",je,[l(D,{style:{"font-size":"12px","text-align":"left",width:"70px"}},{default:t(()=>[k(xe(h.name),1)]),_:2},1024),(p(!0),I(N,null,M(h.color,(u,n)=>(p(),I("span",{class:"theme-color-item",key:n,style:J({backgroundColor:u})},null,4))),128))]),f("div",{class:"theme-bottom",style:J({backgroundImage:e.colorBackgroundImage(h)})},null,4)]),_:2},1032,["class","onClick"]),T===0&&((x=e.props)!=null&&x.themeColor)?(p(),z(R,{key:1,trigger:"hover"},{trigger:t(()=>[l(i,{type:"primary",text:""},{default:t(()=>[l(r,{class:"go-ml-1",size:"16"},{default:t(()=>[l(e.BarChartIcon)]),_:1})]),_:1})]),default:t(()=>[o[10]||(o[10]=k(" 当前组件颜色 "))]),_:1})):(p(),z(R,{key:0,trigger:"hover"},{trigger:t(()=>[l(i,{text:"",disabled:h.id===e.selectThemeColor,onClick:u=>e.deleteHandle(T)},{default:t(()=>[l(r,{class:"go-ml-1 go-cursor-pointer",size:"16",depth:3},{default:t(()=>[l(e.TrashIcon)]),_:1})]),_:2},1032,["disabled","onClick"])]),default:t(()=>[o[9]||(o[9]=k(" 删除自定义颜色 "))]),_:2},1024))])}),128))])])])]),_:1})]),_:1},8,["show"])}const Ze=ne(Oe,[["render",Ne],["__scopeId","data-v-d6c44568"],["__file","index.vue"]]);export{Ze as default};
