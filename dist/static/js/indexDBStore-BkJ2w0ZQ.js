import{br as a,c5 as r}from"./index-DzJUk-4s.js";const o=a({id:"indexDBStore",state:()=>({AIData:r.createInstance({name:"AIData"})}),actions:{async pushDataBaseDescAIResponseDB(e){if(e=this.clearDirtyData(e),Array.isArray(e)&&(e==null?void 0:e.length)>0){const n="dataBaseDescAIResponse";let t=[];const s=await this.getDataBaseDescAIResponseDB();return s?t=[...s,...e]:t=e,t.length>100&&(t=t.slice(-100)),this.AIData.setItem(n,t)}},async getDataBaseDescAIResponseDB(){return this.AIData.getItem("dataBaseDescAIResponse")},async removeDataBaseDescAIResponseDB(){return this.AIData.removeItem("dataBaseDescAIResponse")},async pushGenerateSQL(e){if(e=this.clearDirtyData(e),Array.isArray(e)&&(e==null?void 0:e.length)>0){const n="generateSQL";let t=[];const s=await this.getGenerateSQL();return s?t=[...s,...e]:t=e,t.length>100&&(t=t.slice(-100)),this.AIData.setItem(n,t)}},async getGenerateSQL(){return this.AIData.getItem("generateSQL")},async removeGenerateSQL(){return this.AIData.removeItem("generateSQL")},async pushFilterFunction(e){if(e=this.clearDirtyData(e),Array.isArray(e)&&(e==null?void 0:e.length)>0){const n="filterFunctionResponse";let t=[];const s=await this.getFilterFunction();return s?t=[...s,...e]:t=e,t.length>100&&(t=t.slice(-100)),this.AIData.setItem(n,t)}},async getFilterFunction(){return this.AIData.getItem("filterFunctionResponse")},async removeFilterFunction(){return this.AIData.removeItem("filterFunctionResponse")},async pushVueCode(e){if(e=this.clearDirtyData(e),Array.isArray(e)&&(e==null?void 0:e.length)>0){const n="vueCodeResponse";let t=[];const s=await this.getVueCode();return s?t=[...s,...e]:t=e,t.length>100&&(t=t.slice(-100)),this.AIData.setItem(n,t)}},async getVueCode(){return this.AIData.getItem("vueCodeResponse")},async removeVueCode(){return this.AIData.removeItem("vueCodeResponse")},clearDirtyData(e){return e.filter(n=>n.AIContent!=="调用AI模型失败")},async clearAllIndexDBData(){return Promise.all([this.removeFilterFunction(),this.removeDataBaseDescAIResponseDB(),this.removeVueCode()])}}});export{o as u};
