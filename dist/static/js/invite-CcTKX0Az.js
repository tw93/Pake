import{d as b,r as f,R as g,am as w,ai as y,an as A,_ as B,U as F,c as u,o as l,q as t,F as p,s as m,w as d,V as k,X as x,Y as D}from"./index-DzJUk-4s.js";import{m as S,a as K}from"./team.api-Dw2fcOfS.js";import{_ as N}from"./logo-BWw5BaZQ.js";const T=b({__name:"invite",setup(C,{expose:e}){e();const c=f(""),n=f(!1),s=window.location.search.substring(1).split("&");let a=s[0].replace("invitationKey=",""),i=s[1].replace("invitationType=","");const r=async()=>{const o=await S({invitationKey:a.replace(/%25/g,"%").replace(/\//g,"%2F").replace(/=/g,"%3D")});o.code===g.SUCCESS&&o.data?c.value=o.data.name:n.value=!0};r();const E=async()=>{if(!w()){y.push({path:"/login",query:{invitationType:i,invitationKey:a}});return}i===A.TEAM&&(await K({invitationKey:a.replace(/%25/g,"%").replace(/\//g,"%2F").replace(/=/g,"%3D")})).code===g.SUCCESS&&(window.$message.success("加入成功"),v())},v=()=>{y.push({path:"/"})},_={teamName:c,unEffectiveness:n,queryArr:s,get invitationKey(){return a},set invitationKey(o){a=o},get invitationType(){return i},set invitationType(o){i=o},init:r,joinHandle:E,toFront:v};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}}),I="/static/png/welcomeJoin.png",V={class:"go-invite-box"},h={class:"invite-content"};function j(C,e,c,n,s,a){const i=F("n-space"),r=F("n-button");return l(),u("div",V,[t("div",{class:"invite-header"},[t("img",{class:"invite-logo",src:N,alt:"logo",onClick:n.toFront,title:"返回项目首页"})]),t("div",h,[e[4]||(e[4]=t("img",{class:"invite-png",src:I,alt:"logo"},null,-1)),n.unEffectiveness?(l(),u(p,{key:0},[m(i,{size:4},{default:d(()=>e[0]||(e[0]=[t("span",{style:{color:"#e88080","font-weight":"bold"}},"邀请链接已失效，请联系管理员!",-1)])),_:1}),t("button",{class:"btn err-btn",onClick:n.toFront},"返回首页")],64)):(l(),u(p,{key:1},[m(i,{size:4},{default:d(()=>[e[3]||(e[3]=t("span",null,"是否确认加入空间",-1)),n.teamName?(l(),u(p,{key:0},[e[1]||(e[1]=t("span",null,"「",-1)),m(r,{text:"",type:"primary",style:{cursor:"default","font-size":"16px","font-weight":"bold"}},{default:d(()=>[x(D(n.teamName),1)]),_:1}),e[2]||(e[2]=t("span",null,"」",-1))],64)):k("",!0)]),_:1}),t("button",{class:"btn",onClick:n.joinHandle},"立即加入")],64))])])}const H=B(T,[["render",j],["__scopeId","data-v-4cde3964"],["__file","invite.vue"]]);export{H as default};
