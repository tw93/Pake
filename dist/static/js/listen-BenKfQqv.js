var F=Object.defineProperty;var M=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var O=(n,r,o)=>r in n?F(n,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[r]=o,I=(n,r)=>{for(var o in r||(r={}))z.call(r,o)&&O(n,o,r[o]);if(M)for(var o of M(r))W.call(r,o)&&O(n,o,r[o]);return n};import{a3 as J,bh as H,bZ as Q,b_ as X,D as K,b$ as T,E as Z,bj as Y,ai as ee,c0 as te,d as ne,r as re,G as oe,c1 as se,c2 as ie,ae,_ as fe,c as ue,o as ce}from"./index-DzJUk-4s.js";import{d as le}from"./systemStore-CDAOEx2u.js";import{u as de,a2 as pe,d as ge,t as me}from"./index-B2h3DCGB.js";import{f as he,g as we,h as Ce}from"./index-YIaHLc6Z.js";import{A as ve}from"./driver.js-DincbcBx.js";import{d as ye}from"./querySelectorAll-CWDd-9ax.js";var V={exports:{}};(function(n){(function(r){var o,i={},f={16:!1,18:!1,17:!1,91:!1},p="all",g={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},c={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},v=function(e){return c[e]||e.toUpperCase().charCodeAt(0)},m=[];for(o=1;o<20;o++)c["f"+o]=111+o;function h(e,t){for(var s=e.length;s--;)if(e[s]===t)return s;return-1}function b(e,t){if(e.length!=t.length)return!1;for(var s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0}var E={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function L(e){for(o in f)f[o]=e[E[o]]}function y(e){var t,s,a,d,u,C;if(t=e.keyCode,h(m,t)==-1&&m.push(t),(t==93||t==224)&&(t=91),t in f){f[t]=!0;for(a in g)g[a]==t&&(w[a]=!0);return}if(L(e),!!w.filter.call(this,e)&&t in i){for(C=x(),d=0;d<i[t].length;d++)if(s=i[t][d],s.scope==C||s.scope=="all"){u=s.mods.length>0;for(a in f)(!f[a]&&h(s.mods,+a)>-1||f[a]&&h(s.mods,+a)==-1)&&(u=!1);(s.mods.length==0&&!f[16]&&!f[18]&&!f[17]&&!f[91]||u)&&s.method(e,s)===!1&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}}function _(e){var t=e.keyCode,s,a=h(m,t);if(a>=0&&m.splice(a,1),(t==93||t==224)&&(t=91),t in f){f[t]=!1;for(s in g)g[s]==t&&(w[s]=!1)}}function R(){for(o in f)f[o]=!1;for(o in g)w[o]=!1}function w(e,t,s){var a,d;a=B(e),s===void 0&&(s=t,t="all");for(var u=0;u<a.length;u++)d=[],e=a[u].split("+"),e.length>1&&(d=P(e),e=[e[e.length-1]]),e=e[0],e=v(e),e in i||(i[e]=[]),i[e].push({shortcut:a[u],scope:t,method:s,key:a[u],mods:d})}function D(e,t){var s,a,d=[],u,C,$;for(s=B(e),C=0;C<s.length;C++){if(a=s[C].split("+"),a.length>1&&(d=P(a),e=a[a.length-1]),e=v(e),t===void 0&&(t=x()),!i[e])return;for(u=0;u<i[e].length;u++)$=i[e][u],$.scope===t&&b($.mods,d)&&(i[e][u]={})}}function N(e){return typeof e=="string"&&(e=v(e)),h(m,e)!=-1}function q(){return m.slice(0)}function A(e){var t=(e.target||e.srcElement).tagName;return!(t=="INPUT"||t=="SELECT"||t=="TEXTAREA")}for(o in g)w[o]=!1;function j(e){p=e||"all"}function x(){return p||"all"}function k(e){var t,s,a;for(t in i)for(s=i[t],a=0;a<s.length;)s[a].scope===e?s.splice(a,1):a++}function B(e){var t;return e=e.replace(/\s/g,""),t=e.split(","),t[t.length-1]==""&&(t[t.length-2]+=","),t}function P(e){for(var t=e.slice(0,e.length-1),s=0;s<t.length;s++)t[s]=g[t[s]];return t}function S(e,t,s){e.addEventListener?e.addEventListener(t,s,!1):e.attachEvent&&e.attachEvent("on"+t,function(){s(window.event)})}S(document,"keydown",function(e){y(e)}),S(document,"keyup",_),S(window,"focus",R);var G=r.key;function U(){var e=r.key;return r.key=G,e}r.key=w,r.key.setScope=j,r.key.getScope=x,r.key.deleteScope=k,r.key.filter=A,r.key.isPressed=N,r.key.getPressedKeyCodes=q,r.key.noConflict=U,r.key.unbind=D,n.exports=w})(H)})(V);var _e=V.exports;const be=J(_e),l=de();window.$globalExposeFunction={getCustomComponentObject:{},getComponentList:()=>l.getComponentList,getComponentById:n=>l.getComponentListObject[n],getPageList:()=>l.getPageList,getCurrentPage:()=>l.getCurrentPage,setCurrentPageById:async n=>l.setCurrentPageById(n),getVarList:()=>l.getVarList,getFilterList:()=>l.getFilterList,getRequestGlobalConfig:()=>l.requestGlobalConfig,getGlobalVarIndexByName:n=>n==null?-1:window.$globalVarList.findIndex(r=>r.name===n),getGlobalVarByName:n=>{if(n==null)return;const r=window.$globalVarList.findIndex(o=>o.name===n);if(r!==-1)return window.$globalVarList[r].stringValue},setGlobalVarByName:(n,r)=>{if(n==null)return;const o=window.$globalVarList.findIndex(i=>i.name===n);if(o!==-1){const i=window.$globalVarList[o];i.type=="router"&&(ee.currentRoute.value.query[n]=r,te(n,r)),i.stringValue=r}},updateComponentJsonById:(n,r)=>{l.removeComponentList(n,!1),l.addComponentList(Y(r),!1,!1)},renderComponentById:(n,r=T.COMMON)=>{try{r===T.ACTION&&(window.$stopRequestComponent||(window.$stopRequestComponent={}),window.$stopRequestComponent[n]||(window.$stopRequestComponent[n]=n,window.$updateComponentKey[n].value=new Date().getTime()),window.$stopRequestComponent[n]=n,setTimeout(()=>{window.$stopRequestComponent[n]=null},10))}catch(o){console.log(o)}},triggerComponentEventById:(n,r,o)=>{const i=l.fetchTargetDataById(n);i&&!i.isGroup?(window.$actionEmitValue.set(n,o),ge(i,l,r)):console.log("没有找到对应组件")},fetchComponentDataById:n=>{const r=K(),i=l.getComponentListObject[n];i&&r.emit(Z.COMPONENT_DATA_REQUEST_All,i)},speakTextComponentById:(n,r={text:""})=>{const o=window.$globalExposeFunction.getComponentById(n),i=r.text||o.option.dataset;return Ce(i,I({lang:"zh-CN",pitch:1,rate:1,volume:1},r))},useWebSocket:we,useEventSource:he,useEventBus:K,dayjs:le,axios:X,driver:ve,echarts:Q,gsap:pe,keymaster:be};const Ee=ne({__name:"index",props:{id:{required:!0,type:String},chartConfig:{required:!0,type:Object}},setup(n,{expose:r}){r();const o=n,i=re(),f={width:0,height:0};let p={};oe(async()=>{const c=await se({id:o.id,file_path:o.chartConfig.chartConfig.modelUrl},{controls:!0});if(!ie(c)){c.fn_setSize=c==null?void 0:c.fn_setSize;const v={attributes:!0,childList:!1,subtree:!1},m=window.MutationObserver;p=new m(me(h=>{h.forEach(b=>{if(b.type==="attributes"){const{width:E,height:L}=b.target.style,y=Number(E.replace(/px$/,"")),_=Number(L.replace(/px$/,""));if(f.width===y&&f.height===_)return;f.width=y,f.height=_,c==null||c.fn_setSize(y,_)}})},200)),p.observe(i.value,v)}}),ae(()=>{p.disconnect&&p.disconnect()});const g={props:o,threeDom:i,attrStyle:f,get observer(){return p},set observer(c){p=c}};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}}),Le=["id"];function xe(n,r,o,i,f,p){return ce(),ue("div",{ref:"threeDom",id:o.id},null,8,Le)}const Te=fe(Ee,[["render",xe],["__file","index.vue"]]);function Se(n,r,o,i){var f=i&&typeof i!="boolean"?i.capture:i;n.removeEventListener(r,o,f),o.__once&&n.removeEventListener(r,o.__once,f)}function Ve(n,r,o,i){return ye(n,r,o,i),function(){Se(n,r,o,i)}}export{Te as G,be as k,Ve as l};
