var Y=Object.defineProperty;var X=(n,t,o)=>t in n?Y(n,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[t]=o;var R=(n,t,o)=>X(n,typeof t!="symbol"?t+"":t,o);import{ao as C,aa as O,K as E,d as V,cf as I,_ as w,U as r,c as b,o as g,s,q as m,w as a,X as U,Y as k,p as N,t as S,V as z,z as F,r as T,F as K,n as Q,A as W,bX as J,aw as $,v as ee}from"./index-DzJUk-4s.js";import{d as te}from"./index-YIaHLc6Z.js";import{i as M}from"./icon-Bt2TghsQ.js";import{u as ne}from"./systemStore-CDAOEx2u.js";/* empty css                                                              *//* empty css                                                                          */import{G as oe}from"./GoUserAvatar-BBITl89l.js";function et(n){return C({url:"/ai/generateTableInstructions",method:"post",data:n})}function tt(n){return C({url:"/ai/getTableInstructions",method:"get",params:n})}function nt(n){return C({url:"/ai/generateTableSQL",method:"post",data:n})}function ot(n){return C({url:"/ai/getTableSQL",method:"get",data:n})}function st(n){return C({url:"/ai/generateFunctionCode",method:"post",data:n})}function at(n){return C({url:"/ai/getFunctionCode",method:"get",params:n})}function it(n){return C({url:"/ai/generateVueCode",method:"post",data:n})}function rt(n){return C({url:"/ai/getGenerateVueCode",method:"get",params:n})}const ct=n=>({id:O(),type:"0",time:new Date,content:n}),lt=(n,t)=>(E.isString(n)||(n=JSON.stringify(n)),t&&!E.isString(t)&&(t=JSON.stringify(t)),{id:O(),type:"1",time:new Date,content:n,apply:t}),ut=(n,t)=>(E.isString(n)||(n=JSON.stringify(n)),t&&!E.isString(t)&&(t=JSON.stringify(t)),{id:O(),type:"2",time:new Date,content:n,apply:t}),_t=n=>({id:O(),type:"3",time:new Date,content:n}),dt=n=>({id:O(),type:"4",time:new Date,content:n}),pt=(n,t)=>({id:O(),type:"10",time:new Date,extra:t,content:n}),q="/static/png/logo-square.png",se=V({__name:"index",props:{info:{}},setup(n,{expose:t}){t();const e={width:I("width",0),get Logo(){return q}};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}}),ae={class:"go-ai-chat-ai-loading-message"},ie={class:"message-content-box"};function re(n,t,o,e,l,v){const _=r("n-avatar"),u=r("n-alert");return g(),b("div",ae,[s(_,{class:"go-p-1 avatar",size:"small",src:e.Logo,color:"transparent"},null,8,["src"]),m("div",ie,[s(u,{class:"message-style",type:"info","show-icon":!1,style:N({maxWidth:e.width?e.width-80-4+"px":"100%"})},{default:a(()=>[U(k(o.info.content||"正在解析中，请稍等..."),1)]),_:1},8,["style"])])])}const ce=w(se,[["render",re],["__scopeId","data-v-08509150"],["__file","index.vue"]]),le=Object.freeze(Object.defineProperty({__proto__:null,AIChatLoadingMessage:ce},Symbol.toStringTag,{value:"Module"})),ue=V({__name:"index",props:{info:{}},emits:["copy","useResponse"],setup(n,{expose:t,emit:o}){t();const e=o,l=I("width",0),v=I("hiddenBtn",!1),_=I("isVertical",!1),{CopyOutlineIcon:u}=M.ionicons5,{SendAltFilledIcon:c}=M.carbon,i=n,A={emit:e,width:l,hiddenBtn:v,isVertical:_,CopyOutlineIcon:u,SendAltFilledIcon:c,props:i,copyHandle:()=>{e("copy",i.info.apply||i.info.content||"")},selectSqlHandle:()=>{i.info.apply||i.info.content?e("useResponse",i.info.apply||i.info.content):window.$message.error("请选择正确内容")},get Logo(){return q}};return Object.defineProperty(A,"__isScriptSetup",{enumerable:!1,value:!0}),A}}),_e={class:"go-ai-chat-ai-message"};function de(n,t,o,e,l,v){const _=r("n-avatar"),u=r("v-md-preview"),c=r("n-alert"),i=r("n-icon"),h=r("n-button"),p=r("n-tooltip"),A=r("n-flex");return g(),b("div",_e,[s(_,{class:"go-p-1 avatar",size:"small",src:e.Logo,color:"transparent"},null,8,["src"]),m("div",{class:F(["message-content-box",{isVertical:e.isVertical}])},[s(c,{class:"message-style",type:"info","show-icon":!1,style:N({maxWidth:e.width?e.width-80-4+"px":"100%"})},{default:a(()=>[s(u,{mode:"preview",text:o.info.content||"..."},null,8,["text"])]),_:1},8,["style"]),!e.hiddenBtn||!o.info.apply?(g(),S(A,{key:0,class:"btn-list go-transition-quick",justify:"end",size:0,wrap:!1},{default:a(()=>[s(p,{placement:"bottom",trigger:"hover","show-arrow":!1},{trigger:a(()=>[s(h,{quaternary:"",size:"tiny",onClick:e.selectSqlHandle},{icon:a(()=>[s(i,{depth:2},{default:a(()=>[s(e.SendAltFilledIcon)]),_:1})]),_:1})]),default:a(()=>[t[0]||(t[0]=m("span",null,"应用",-1))]),_:1}),s(p,{placement:"bottom",trigger:"hover","show-arrow":!1},{trigger:a(()=>[s(h,{quaternary:"",size:"tiny",onClick:e.copyHandle},{icon:a(()=>[s(i,{depth:2},{default:a(()=>[s(e.CopyOutlineIcon)]),_:1})]),_:1})]),default:a(()=>[t[1]||(t[1]=m("span",null," 复制",-1))]),_:1})]),_:1})):z("",!0)],2)])}const pe=w(ue,[["render",de],["__scopeId","data-v-58898fa8"],["__file","index.vue"]]),fe=Object.freeze(Object.defineProperty({__proto__:null,AIChatMessage:pe},Symbol.toStringTag,{value:"Module"})),ge=V({__name:"index",props:{info:{}},emits:["copy","useResponse"],setup(n,{expose:t,emit:o}){t();const e=o,l=n,{CopyOutlineIcon:v}=M.ionicons5,{SendAltFilledIcon:_}=M.carbon,u=I("width",0),c=T("vue"),i=T("all"),h=d=>d?`\`\`\`html
 ${d}`:"",p=()=>{var d,y,f;return c.value==="vue"?((d=l.info.content)==null?void 0:d.vue)||((y=l.info.content)==null?void 0:y.AIContent)||"":(f=l.info.content)==null?void 0:f.json},x={emit:e,props:l,CopyOutlineIcon:v,SendAltFilledIcon:_,width:u,vueType:c,sendVueType:i,generateCode:h,selectContent:p,copyHandle:()=>{const d=`已复制${i.value==="all"?"所有":i.value}代码到剪切板`;e("copy",p(),d)},selectSqlHandle:()=>{var d,y,f,j,D,P,B;if(i.value!=="all"){let H="";if(i.value==="vue"?(H=((d=l.info.content)==null?void 0:d.vue)||((y=l.info.content)==null?void 0:y.AIContent)||"",c.value="vue"):i.value==="json"&&(H=(f=l.info.content)==null?void 0:f.json,c.value="json"),!H)return;window.$message.success(`成功应用${i.value==="all"?"所有":i.value}代码`),e("useResponse",H,{type:c.value});return}window.$message.success("成功应用所有代码"),e("useResponse",((j=l.info.content)==null?void 0:j.vue)||((D=l.info.content)==null?void 0:D.AIContent)||"",{type:"vue"}),(P=l.info.content)!=null&&P.json&&e("useResponse",(B=l.info.content)==null?void 0:B.json,{type:"json"})},get Logo(){return q}};return Object.defineProperty(x,"__isScriptSetup",{enumerable:!1,value:!0}),x}}),me={class:"go-ai-chat-ai-message"},ve={class:"message-content-box"},he={class:"go-ai-chat-vue-code-message"};function ye(n,t,o,e,l,v){const _=r("n-avatar"),u=r("v-md-preview"),c=r("n-tab-pane"),i=r("n-tabs"),h=r("n-alert"),p=r("n-select"),A=r("n-space"),L=r("n-icon"),x=r("n-button"),d=r("n-tooltip"),y=r("n-flex");return g(),b("div",me,[s(_,{class:"go-p-1 avatar",size:"small",src:e.Logo,color:"transparent"},null,8,["src"]),m("div",ve,[s(h,{class:"message-style",type:"info","show-icon":!1,style:N({maxWidth:e.width?e.width-80-4+"px":"100%"})},{default:a(()=>[m("div",he,[s(i,{type:"segment",animated:"",size:"small",value:e.vueType,"onUpdate:value":t[0]||(t[0]=f=>e.vueType=f)},{default:a(()=>[s(c,{name:"vue",tab:"vue"},{default:a(()=>{var f,j;return[s(u,{mode:"preview",text:e.generateCode((f=o.info.content)==null?void 0:f.vue)||e.generateCode((j=o.info.content)==null?void 0:j.AIContent)||"暂无数据"},null,8,["text"])]}),_:1}),s(c,{name:"json",tab:"json"},{default:a(()=>{var f;return[s(u,{mode:"preview",text:e.generateCode((f=o.info.content)==null?void 0:f.json)||"暂无数据"},null,8,["text"])]}),_:1})]),_:1},8,["value"])])]),_:1},8,["style"]),s(y,{class:"btn-list go-transition-quick",justify:"end",size:0,wrap:!1},{default:a(()=>[s(A,null,{default:a(()=>[t[2]||(t[2]=U(" 操作目标 ")),s(p,{value:e.sendVueType,"onUpdate:value":t[1]||(t[1]=f=>e.sendVueType=f),size:"small",options:[{label:"全部应用",value:"all"},{label:"选择Vue代码",value:"vue"},{label:"选择Json代码",value:"json"}],style:{width:"140px"}},null,8,["value"])]),_:1}),s(d,{placement:"bottom",trigger:"hover","show-arrow":!1},{trigger:a(()=>[s(x,{quaternary:"",size:"tiny",onClick:e.selectSqlHandle},{icon:a(()=>[s(L,{depth:2},{default:a(()=>[s(e.SendAltFilledIcon)]),_:1})]),_:1})]),default:a(()=>[t[3]||(t[3]=m("span",null,"应用",-1))]),_:1}),s(d,{placement:"bottom",trigger:"hover","show-arrow":!1},{trigger:a(()=>[s(x,{quaternary:"",size:"tiny",onClick:e.copyHandle},{icon:a(()=>[s(L,{depth:2},{default:a(()=>[s(e.CopyOutlineIcon)]),_:1})]),_:1})]),default:a(()=>[t[4]||(t[4]=m("span",null," 复制",-1))]),_:1})]),_:1})])])}const be=w(ge,[["render",ye],["__scopeId","data-v-a8618e2d"],["__file","index.vue"]]),Ae=Object.freeze(Object.defineProperty({__proto__:null,AIVueCodeChatMessage:be},Symbol.toStringTag,{value:"Module"})),xe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGgAAABYCAMAAAAuuEI+AAAA+VBMVEVHcExNiuNzluOVsOpeluhDg+IbbN4LY93W4PiZs+prkeGUr+kLY9wKY91tk+JokeKqwO6VsOprkuHV4PcLY92VsOoIYN8LZN0LZdoMZNsLZN4LY90LYtwLZd8KZNsLZN4MZd2Vr+qdsesAYtgKZd0KZNyAgL+UsOuVsOmWsesMZN4LY9wAVdULZN1OiuSqqv8LZd0LZN2Vse2VsepNieSUsOoAVf90mOSTr+lulOMKY92VseoKY92XrvMMXdyWseuVsOprkuKVsOoLY90LZN1pkeILZN3W4feZsuqUr+pjmuhKh+MZa93V4PcLZN2VsOpskuKrwO6qv+59QwRdAAAATXRSTlMA59n25eXZn/bZoqKi3/j33+ff6OfoIO8wQL/fYG+Az69sDQ2BsASBvLFrSAbP6Aadukid6PsD14DXfvT0FhZytZ/bcbOe2eTO49XZxPNdEPAAAAAJcEhZcwAACxIAAAsSAdLdfvwAAAEeSURBVGje7drXUgJBEIXhVQwYEFFcchTMmaCYULKgg/r+D2PLlsgNdbzpsSzP/wDzdVft1c44jlcstahSOupM5saNWnH324lGjGKR8VKuqiPS104Jo9yx5ySNekk7CxmTGX3YxkIxgVI2oLRAWRtQVqCMDSggUIAQIUKE/gHUn0OdzIDK86iBQJsvqDfU+xAVIkSIECFChAj9dajrR2Go4gM9CbQOz4HzDl9RG4QIESJEiBAhQj+Eekuoy1lQbQH1LNAWnHcNzRuEP53ChAgRIvS7UMMG1BHowQbUEqhuA2oKdHejD93ef16WX+lD16Pb/509bei86j1oyO/rQsXt8aOTXEgPCh9MPqM5vdgtrUzrcRnUXp3WWeHwyBM+AITwERGiuoLJAAAAAElFTkSuQmCC",Ce=V({__name:"index",props:{info:{}},setup(n,{expose:t}){t();const o={get tableImg(){return xe}};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}}),we=["src"];function Ie(n,t,o,e,l,v){const _=r("n-tag"),u=r("n-flex");return g(),S(u,{class:"go-data-base-table-extra",justify:"flex-end"},{default:a(()=>[(g(!0),b(K,null,Q(o.info.extra,(c,i)=>(g(),S(_,{key:i,bordered:!1,type:"info"},{avatar:a(()=>[m("img",{src:e.tableImg,style:{height:"18px"}},null,8,we)]),default:a(()=>[U(" "+k(c.name),1)]),_:2},1024))),128))]),_:1})}const Se=w(Ce,[["render",Ie],["__scopeId","data-v-688c6a89"],["__file","index.vue"]]),Me=Object.freeze(Object.defineProperty({__proto__:null,DataBaseTableExtra:Se},Symbol.toStringTag,{value:"Module"})),Oe={},Ve={class:"go-ai-message-tip"};function je(n,t){const o=r("n-divider");return g(),b("div",Ve,[s(o,null,{default:a(()=>t[0]||(t[0]=[m("span",{depth:"3"},"历史消息",-1)])),_:1})])}const Ee=w(Oe,[["render",je],["__scopeId","data-v-7928f898"],["__file","index.vue"]]),Le=Object.freeze(Object.defineProperty({__proto__:null,MessageTip:Ee},Symbol.toStringTag,{value:"Module"})),He=V({__name:"index",props:{info:{},userInfo:{}},emits:["copy","edit"],setup(n,{expose:t,emit:o}){t();const e=o,{CopyOutlineIcon:l}=M.ionicons5,{EditIcon:v}=M.carbon,_=I("hiddenBtn",!0),u=I("isVertical",!1),c=n,p={emit:e,CopyOutlineIcon:l,EditIcon:v,hiddenBtn:_,isVertical:u,props:c,copyHandle:()=>{e("copy",c.info.apply||c.info.content||"")},editMessage:()=>{e("edit",c.info.apply||c.info.content||"")},get GoUserAvatar(){return oe}};return Object.defineProperty(p,"__isScriptSetup",{enumerable:!1,value:!0}),p}}),Te={class:"go-user-chat-ai-message"},Ne={class:"text-content"};function Ue(n,t,o,e,l,v){var p;const _=r("n-icon"),u=r("n-button"),c=r("n-tooltip"),i=r("n-flex"),h=r("n-alert");return g(),b("div",Te,[m("div",{class:F(["message-content-box",{isVertical:e.isVertical}])},[!e.hiddenBtn||!o.info.apply?(g(),S(i,{key:0,class:"btn-list go-transition-quick",justify:"end",size:0,wrap:!1},{default:a(()=>[s(c,{placement:"bottom",trigger:"hover","show-arrow":!1},{trigger:a(()=>[s(u,{quaternary:"",size:"tiny",onClick:e.copyHandle},{icon:a(()=>[s(_,{depth:2},{default:a(()=>[s(e.CopyOutlineIcon)]),_:1})]),_:1})]),default:a(()=>[t[0]||(t[0]=m("span",null," 复制",-1))]),_:1}),s(c,{placement:"bottom",trigger:"hover","show-arrow":!1},{trigger:a(()=>[s(u,{quaternary:"",size:"tiny",onClick:e.editMessage},{icon:a(()=>[s(_,{depth:2},{default:a(()=>[s(e.EditIcon)]),_:1})]),_:1})]),default:a(()=>[t[1]||(t[1]=m("span",null," 重新编辑",-1))]),_:1})]),_:1})):z("",!0),s(h,{class:"message-style",type:"default","show-icon":!1},{default:a(()=>[m("div",Ne,k(o.info.content||"..."),1)]),_:1})],2),s(e.GoUserAvatar,{avatarUrl:(p=o.userInfo)==null?void 0:p.avatar},null,8,["avatarUrl"])])}const ke=w(He,[["render",Ue],["__scopeId","data-v-2afba35a"],["__file","index.vue"]]),ze=Object.freeze(Object.defineProperty({__proto__:null,UserChatMessage:ke},Symbol.toStringTag,{value:"Module"})),Z=Object.assign({"./AIChatLoadingMessage/index.ts":le,"./AIChatMessage/index.ts":fe,"./AIVueCodeChatMessage/index.ts":Ae,"./DataBaseTableExtra/index.ts":Me,"./MessageTip/index.ts":Le,"./UserChatMessage/index.ts":ze}),G=[];for(const n in Z){const t=Z[n];for(const o in t)G.push({name:o,component:t[o]})}const ft={0:"MessageTip",1:"AIChatMessage",2:"UserChatMessage",3:"AIChatLoadingMessage",4:"AIVueCodeChatMessage",10:"DataBaseTableExtra"};class qe{constructor(){R(this,"_componentMap",new Map);this.registerPanels(G)}registerPanels(t){t.forEach(o=>{this._componentMap.set(o.name,o.component)})}hasPanelComponent(t){if(this._componentMap.has(t))return!0;{const o=t.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join("");return this._componentMap.has(o)}}resolvePanelComponent(t){if(this._componentMap.has(t))return this._componentMap.get(t);{const o=t.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join("");if(this._componentMap.has(o))return this._componentMap.get(o)}}}const De=V({__name:"AIChatContent",props:{messageList:{},contentHeight:{}},emits:["edit","useResponse"],setup(n,{expose:t,emit:o}){t();const e=n,l=o,v=T(),_=T(),u=new qe,c=ne(),{copy:i,isSupported:h}=te();W(()=>e.messageList,()=>{$(()=>{_.value.scrollHeight,v.value.scrollBy({top:99999999,behavior:"smooth"})})},{immediate:!0});const x={props:e,emit:l,scrollbarRef:v,contentRef:_,AIMessage:u,systemStore:c,copy:i,isSupported:h,editHandle:d=>{l("edit",d)},copyHandle:(d,y)=>{h.value?(i(d),window.$message.success(y||"复制成功")):J(d)?window.$message.success(y||"复制成功"):window.$message.error("复制失败")},sqlHandle:(d,y)=>{l("useResponse",d,y)},get isNumber(){return E.isNumber}};return Object.defineProperty(x,"__isScriptSetup",{enumerable:!1,value:!0}),x}}),Pe={ref:"contentRef",class:"go-ai-chat-content"};function Be(n,t,o,e,l,v){const _=r("n-scrollbar");return g(),S(_,{ref:"scrollbarRef",trigger:"none",style:N({maxHeight:e.props.contentHeight?e.isNumber(e.props.contentHeight)?e.props.contentHeight+"px":e.props.contentHeight:"100%"})},{default:a(()=>[m("div",Pe,[(g(!0),b(K,null,Q(o.messageList,(u,c)=>(g(),b("div",{class:"go-mt-2",key:c},[e.AIMessage.hasPanelComponent(u.type)?(g(),S(ee(e.AIMessage.resolvePanelComponent(u.type)),{key:0,ref_for:!0,ref:"componentRef",info:u,userInfo:e.systemStore.getUserInfo,onCopy:e.copyHandle,onEdit:e.editHandle,onUseResponse:e.sqlHandle},null,40,["info","userInfo"])):z("",!0)]))),128))],512)]),_:1},8,["style"])}const gt=w(De,[["render",Be],["__scopeId","data-v-e6b20cd7"],["__file","AIChatContent.vue"]]),Re={},Ze={class:"go-ai-logo"};function Fe(n,t){return g(),b("div",Ze)}const mt=w(Re,[["render",Fe],["__scopeId","data-v-ae197523"],["__file","logo.vue"]]);export{mt as A,_t as a,rt as b,ut as c,dt as d,ct as e,gt as f,it as g,et as h,tt as i,lt as j,st as k,at as l,ft as m,pt as n,nt as o,ot as p,xe as t};
