import{d as se,bx as ze,ac as be,r as E,aO as ee,ak as te,aP as oe,cd as Ne,b3 as Be,bQ as Te,R as Y,ay as X,aC as de,az as ue,bc as me,aB as fe,_ as le,U as r,c as w,V as A,o as m,s as t,w as o,q as i,t as L,X as y,Y as V,a5 as Ve,e as pe,H as ge,f4 as _e,G as Re,A as ye,D as He,bs as Pe,cF as Ae,f5 as je,F as $,n as ne,z as Qe,p as ve}from"./index-DzJUk-4s.js";import{u as Me}from"./projectStore-BUNtFK-_.js";import{u as we,d as Ue}from"./systemStore-CDAOEx2u.js";import{g as he,D as Xe}from"./plugin-BZaVEG5Y.js";import{a as Ye,r as Le}from"./file-BoGdIhh5.js";import{i as Oe}from"./import-C6j5z5Sk.js";import{e as Ce,a as Je,t as qe}from"./templateCode-B4T5QxGG.js";import{i as Ze}from"./index-YIaHLc6Z.js";import{i as Z}from"./icon-Bt2TghsQ.js";import{r as Ge}from"./chart_default-Cv54ZmSo.js";import{_ as Ke}from"./points-Bi1H5gtF.js";import{u as We}from"./index-CNsebZrf.js";import"./index-DumZb7Zp.js";import"./index-jtCf6VIy.js";import"./index-B2h3DCGB.js";import"./fileTypeEnum-22QBGXO_.js";import"./config-4CXe4sys.js";import"./config-Df8FU9mm.js";import"./svip-tip-BogTL7q_.js";import"./team.api-Dw2fcOfS.js";import"./index-CYCNU51b.js";import"./doc-Br7GyA9J.js";import"./project-list-bg-C8sD85Ky.js";import"./masterplates.api-CmXDBnKg.js";/* empty css                                                              *//* empty css                                                                          */import"./GoUserAvatar-BBITl89l.js";import"./noCard-C4rQreFQ.js";const $e="/static/png/edit-file.png",et="eNp9Uz1v1EAQ/SsjU9gnnXxB6cw5Eh8pQIQgoNzG3I4vG+xdy7u+5HQ6KUEUkQghQZACRIEEJBRACpQCKb8mOif5F8yuLx8FSmHJ++bNzHszuyPvdlGEgwq9yOvqXikKAxpNVcwxKfJClQZGUGLaBiUXVCUNchhDWqocfMrymWSyp6Q2YHDVQGy5ge+3LN7pwL3FBag3X54eHU22tyYbnyd7ryebu0xeFAuCFsRzMGISgPine98nb3dOv+yffP17vLZ9kXG8tnPy8dXZux+Tn9uWuiIkVythobRZQK2TPgauBIAZFhiBL6Sg6n67AXlikggqyTEVErlDx6TRfk5nvfWtfn9Yfzio3/yqP/2pdw/qrf2ztfX6cKNe/83ktF/C+fwApXkotEGJZeDnTXe/DYkeyh4EaOOXnprZjJysttNB44vBsUJ7nBqfNnUCLCRSCGwOxHEMflUQFf1WU5NM0qzDQZJVFHdFQ4s4V2SqDWmSaWzdYrLbaXZK26SDwbzIqBCdALpcDECbYYYx83oqU2UEN2Zmejc5Mm9uRJLtQsfjboeIlNHtXEmno0ul3+eKDxtdeVL2hYxghhoDqAGWaaZWIlgSnKMkkMSRIJfntT2jaTip6IfLWkm6fq6GlZIXIsNysTCChse86Nw185KMCj5wmCkrnG6Xcpaw9+I/+LJetRjzHpeosRyQs4uYIbVomvD800d2fpfBXPEqI/Y1wSeoVVZZjQ3tDl0vkn2F59Ted49IyP4zPb9Kl0afm7JC3cYcn3n0mu5eY/1S7mw4e75pb/wPPXJiFA==",tt="eNp9Vd1uG0UUfpVhb3YtmXVQ75w4qLS5KCINAu5YLsa7Y3ua3ZnVzPiPyFIaUVHRNqRQqkIFElKhBdTQC1RBRfoyZR37LTjzs2s7/ZHl9c53zvnmnDPfGe955/M8HPSJ1/Q2ZCxorpAkqp9vRoxmORcK7SFBOnXE2TbvM0USNEEdwTPkQ5Rfefkk7mGhJCARazTQ9ObB7ORk9tXB6cE/EYs5kwolENXSbEHN+LgQVBz/9N/zGxFLiXLYJXDHLCbgzvpp6jiL6z8WD28UN+/Or906PTkuaSmjaidXlDNwDxgZXsQK11BrE+1FDKEBFoiXZoMg1MbxbldAPckFnnLRRJEnum0crNXNpxZ5deuoOE8VzZtob+KQlHQJSwCwS4QS2K2J3LbvhtZujWXM6PyIyteHGPNqxNhFlGtJBCUAfFpSVFwIMZyRJbY2FpcBcYGmiHEODj4Y/CX0TBJ6+QGVqnSY2JfP9M9kXT8F6EIw18uIgcPqqRT3n89+flSeSiwIVmTLHfGrDsb6lSJooSFlCR+GDjBb0g4K3nJAzSVw1lBqpVb25CUJOYJQCyUAEYYDnPZJHfkJFrt+zRCacrVu/742//7B6b/fFo/vaWiVLIxTgkVgQ86YYGysCoOFIKuibYTulmnS6Q9fFMcn8z/uzb78fb5/UDy7s2iIIJJ+TnbacOQDIvQEkCH6aAUMgkUXX8rDxusRg6rMUzerKlu3cZkr5PZlyWNxthd3tt0kF0eH1UFHrLoMljMB/9nDX4uvb+sCHzx7sX9URbzYvw0lz7/5rXh8pF3dUedcqm0iJe6SwBXjtKpbSJJSrlaqMK2kQxlJDKpL01972xz+Mr3zdPrdk+mt4+n9v6Z3n0wPH833r06fXp9e/TNibj+cJFsDwpTWOWHQRz+zu/t1hOWYxSgg2r5Sk+Mz3GU3jZcZmVAnjFqtFvL7OQDEr3S4MgHLIfpRqW5SRx2cSqKBjYa9guHyhYUiWZ4CA6wQ2kjoQF+drciDg4o8JNU4JbAa0kT1muidtbXBcB31CO32VFOveuuRt7nRgDgg2GgsscHSRMNrmydjm2+GRZeyJloziXFQRiflwybq0SQheuggV8jPxHl1z177b2c4D69IzuDvw7BEziAjr7rvIs8NoMYirxEnrFGOZEYZxEde2QxgVhLmoEO7Z3hjnuU0JcIO1io/TiHV9w2mBEx2icc9Eu++Ar8iRzaXD2EWtPir+z7yFPSBKGve+vgyGcF7Zcx40k/B+w1GmFSe9s0VadzeA9lC2kt+JttLpk2UdT+RWyMQoyyL0omabhj/yIN/2QtvKH2R7rnwXNXFyf9qPNjL",ot="eNqNVd1u3EQUfpUj92Idyev8tVEx2Yq/SFCRBtHeYS689ngzjXfG8tibLKuVdhGlhaRpWtFelIJAok24aCkSiqBpnibrTfaKV+DMjL3p0iqw0tozZ7455zvfOTPuGO/Gsd3KiOEYi8JPaJyCIGkWX3IZbcY8SaEDCQkt4GyZZywlAXQhTHgTKrir4jKX+ZyJFOop+5jiuybh5mefT5ULgkTEL+0zaHbZ9DR8sLIMw60vTw4P853t/NYP+e5mvvXAZeMwpjkFtUvQcRkA4k92n+R37p78vHf8y4uj3s54x1Hv7vHDr0b3fs2f7kjoOmUBX7djLtJlIoTXIKZyAZC2Y+JAhTKK3iuWNgZe6jmQsYCElJFAWbvIUf4Vz+H24+F3+8P7z4e3nw2//2P44Plwe2/U6w/3bw37v7msiOcFwVKLsFRKQBhJzEpTR69Y4Ik288Ekcv00Jy1OR9GyFA8UtgYKZctpkXgRVBGQJhqCKfdArVaDShYjlFSmtE8oq2C3vChDiPJrF0aVG6ZmQehFgky9XaQ46n0z+PNp/vWN/Nlfk0X70GP1IJJ+TEyTbFiA2jVPc9CocTCFmajX4MXm4GD/f9VllfO1pSZNlYyT5SmAym/+7d7g8NHx7wf5j5t/v3yY376f3zw46vXzO1t6cLx7kN94XAxuYq/0tYKlDyXwNR3Tj6i/VsZS7kePeidP+oOXP41697CvTmWXP5WnA5evrlyxYy8RxFRDkSaUNWjYNpU62DkSjEoXreSyxWl9tPBQ4QRBcYRVwxnAYkBb4EeeEDXXwEJV63zDNdTSvxalc9cAp5x3wPNT2kJCSnfVD8VZ6yKuVQ15gjBFCgsnMVP4KltEulojbelYlc0os3xHqYL2iR6YaIAxQYBOR5nsyKuTCLoqayQ+jcx1fsVocfqVtHEq0nYkh3UetHWBm17SoMyBGexLAN4iSRjxdQdWaRAQhkb07TLZzFIjvSegAn22HQgjsqH2+TzKmqza8GIHzsfa9p++bJmC9rhKaGM1dWCu3BxyllYF/QJ1ni1tEd4V1deQMV4C2AgqLswuFFYkxBMHzoVhqOaZIElVS+vgbUc0KEuERMWc4t2XKFudJwFB2xx6EzyiASSNumfOLsxY6P0tfFw8b8GMPSsPMsI9f62R4N0ZVIuQGn7Bgrk5C+YVdkFi35C7rVtJS/B64HMzF8N6eOGsOPPIam5+tngUrHTrq0oblpEKvFtC2rCvC87we6OCuYbPmzGNSLISpxTvHtcYH3jX8CIs22VlS5OMFCcV96wSf+0N9usCG9nBwScJQZ1bxDXGayn2F8G2l8tLV6+QDRyPF5s8yCJEn7H4KUExMslRw95DCZD2KzjF9iP11cQ+uCaWNvBbIMqkJFF1Jyi8a+Dn8/0zUj+lO2/Pl1e30f0HmJnMrg==",at="eNqVVltv3EQU/isjF+SNWG1SytOSDSppHkCEIspbnQfHnt2d1ju27PEmYbVSCg0NanNpIaEqRYKqJOUhN0ChbRLxY5LxZp/4C5yZ8W0vATVStJ5zznzzzXcudku76nmlZoi1sjYeWD7xGAowC70Jg5KG5/oMtZCPq0Xk0mk3pAzbqI2qvttAOuzSDWpQy6UBQwzPM1QRsQVdHzHo6Cg6X3vKVza6Syudk90krGk6Ib7uMQKrOLxlUIR0x5zFjl5GcoVUXBnp0c/3us8e/3P8RC8qB1vwhJ1QL2SpjTAnCwZSCLWlS6+6lE26jusPIl8aG7Mu27gP15LBfbh854ezk++6z56ef/t7P/oN8iUeAH/3vV5UGjZm8QWw/Pk231/Lwwopr2HL9U0h0wB41XQC3IsfzBFm1fvxz17e58uPOq//7ge/6pDaIK7u4GomaQyMHWwN6Mz3XnVP1qPNV/x4LfG5KqdldFOtUYIu/mRyxcaDJf7XVrLlorMTrheDnL3cGQZiYSjQVOb/h+FrfwyD8UmtzqRmeZAZKaJB26q4+fI3nYOj08U70eM9vr7FDzb48WLaDGYt6C1yqUrMIi3XzXtQAqo/Eh543jOpXUbMD5McW3Xi2D6mIG2unou58lPUZHjfEXzpkO9+/UZH9FUfnJOVTKLBDGggVbh2fRpFD746Pznh66t8+Se+fZ8/2DRoOi0KhRFUmVC0xEjY3uJrD89/edF5/vp0cT3dcbr4sPPkbvfRb3xnXYTOEWq7cyXPDdg0DgKzhgutrPUJAAMx22RmGYXUxlVCxWACVuJfMotWf42+P4w29qOV3ejHP6PN/Wj1RRfSdbgc3dkzaHyCadtTTSibT0jAMMV+QW+o8wDfDBaohQpY+LNbqAwrNooDTMQKklElsYyvGh8qCQgTqaKC2IMqlQrSQw9CsT6SJgw0LskCBCyBUhKWWG6J1zm6e3Z0mExTgZeDi7svw0sENCGrrPRWzXFnTWfShZFOwRDXZklIGT8X5KHELma9krZ0fmgrkmnXiEqHUsrqvc/v0sm6SWuQt8JtvFBUUJmYucbr2X8TgmdSPeRv2o/qQSRa9WNRTcSR9w06PqreYfD2ggXDDc8BlWGF0LhNmqgcsAUHVwwtVclmdSipy2NjbyftId8AfXdO267ndkn/DQkW5pj+O0j35tMJ2tNcfRt7nfH2D6BWoMJ9B0ocRraeR5JNOQRE2tV+JZI20Wr1hskpGB/RboNXvr/b7fFR0AkEGx/NqQdLKRw81lnDKaJZ14ZcXjI9T6WxYfo1AkzGIAeQ8yb2q447V0Z1YtuYghHyBLmRGFpRYwE0UZXUSrcCl8KXh8QwNAvKkzjYjzkaWvqGMjTTAcCPpS03t2BPHVu3h9hvBfPCZmif+TjAfhMbWupjwBYz5Z668anos8zZcO3Qgej/cH6OA9cJBUcV9iEkCGjn4iTbj+T3E6G1L4KpeRguQXIpQTSb2IYGH1KiMy+6ekb3SulKUvRa+197yXsZ";var Se=(v=>(v.SELF="self",v))(Se||{});const nt=se({__name:"ItemCard",props:{cardData:{type:Object},index:{type:Number,default:0}},emits:["delete","updateList","update"],setup(v,{expose:a,emit:c}){a();const{PersonIcon:e}=Z.ionicons5,F=ze(),z=we(),_=be(),D=E(window.__PRIVATE_MODULE__.MemberPoint),f=v,p=c,{TrashOutlineIcon:N,DownloadOutlineIcon:R}=Z.ionicons5,{EditIcon:B,SendBackwardIcon:b}=Z.carbon,k=()=>Ge,S=()=>{var l;p("delete",(l=f.cardData)==null?void 0:l.id)},j=()=>{history.pushState({},"",window.location.href);const l=ee(te.REMOTE_COMPONENT_EDITOR_NAME,"href");oe(l,[f.cardData.id],!0,!1)},H=()=>{var l,d;p("update",{id:(l=f.cardData)==null?void 0:l.id,state:(d=f.cardData)!=null&&d.state?0:1})},I=E(!1),n=E("self"),u=E([]),h=E(""),G=async()=>{h.value=f.cardData.id,J()},x=()=>{I.value=!1},O=async()=>{console.log(f.cardData);const l=f.cardData.id,{data:d}=await Ne({id:l}),P={title:d.title,describe:d.describe,hash:d.hash,options:d.options,thumbnail:d.thumbnail};Ye(Be(P),l,"json")},J=()=>{const l=[{value:"self",label:()=>X(fe,{align:"center",size:4,style:{padding:"6px 0"}},{default:()=>["我的空间",X(me,{style:{opacity:".5"}},{default:()=>X(e)})]})},{type:"group",label:"空间列表",key:"空间列表",children:[]}];z.getTeamList.forEach(d=>{l[1].children.push({label:d.team_name,value:d.id})}),u.value=l,setTimeout(()=>{I.value=!0,n.value="self"})},Q=async()=>{if(!h.value){window.$message.error("添加失败，请刷新后重试"),x();return}let l=null;l=F.create("正在复制组件中，请稍后",{type:"loading"});const d=await Te({id:h.value,team_id:n.value==="self"?void 0:n.value});try{if(d.code===Y.SUCCESS){const P=()=>X("div",{style:{borderRadius:"4px",padding:"8px 25px",boxShadow:"var(--n-box-shadow)",display:"flex",gap:"10px",backgroundColor:_.darkTheme?"#48484e":"#fff"}},[X(de,{},{default:()=>"创建成功,"}),X(ue,{text:!0,type:"primary",size:"small",onClick:T},{default:()=>"点击查看"})]);l.destroy(),F.success("添加成功",{type:"success",render:P})}else window.$message.error("创建失败, 请稍后重试");x(),p("updateList")}catch(P){x(),window.$message.error("创建失败, 请稍后重试")}},T=()=>{if(n.value==="self"){const l=ee(te.SCREEN_ITEMS_NAME).path;oe(l,void 0,!1,!1,{tabKey:"component"})}else{const l=ee(te.TEAM_MANAGEMENT_MY_NAME).path,d={tabKey:"component"};oe(l,[n.value],!1,!1,d)}},K={PersonIcon:e,message:F,systemStore:z,designStore:_,isPrivateMemberPoint:D,props:f,emit:p,TrashOutlineIcon:N,DownloadOutlineIcon:R,EditIcon:B,SendBackwardIcon:b,requireErrorImg:k,deleteHandle:S,editHandle:j,evUpdateMasterplatesGrounding:H,SelfEnum:Se,createComponentHandleDialogShow:I,createComponentHandleDialogValue:n,dialogOptions:u,selectId:h,createHandle:G,closeDialogHandle:x,copyHandle:O,createComponentHandleDialog:J,createComponentHandle:Q,toComponentPage:T,get dayjs(){return Ue},get NText(){return de},get NButton(){return ue},get NFlex(){return fe},get NIcon(){return me}};return Object.defineProperty(K,"__isScriptSetup",{enumerable:!1,value:!0}),K}}),st={key:0,class:"go-items-list-card"},lt={class:"list-content"},rt=["src"],it={class:"list-footer-box"},ct={class:"go-mb-1"},dt={class:"list-footer"},ut={class:"item-left"},mt={class:"go-flex-items-center list-footer-ri"},ft={key:0,class:"points-tip"},pt={class:"go-pl-1"};function gt(v,a,c,e,F,z){const _=r("n-image"),D=r("n-badge"),f=r("n-tag"),p=r("n-tooltip"),N=r("n-space"),R=r("n-card"),B=r("n-divider"),b=r("n-select"),k=r("n-modal");return c.cardData?(m(),w("div",st,[t(R,{hoverable:"",size:"small"},{action:o(()=>[i("div",it,[i("div",ct,[t(e.NFlex,{class:"badge-box",align:"center",wrap:!1,size:2},{default:o(()=>[t(D,{class:"go-animation-twinkle",dot:"",color:c.cardData.state===0?"#fcbc40":"#34c749"},null,8,["color"]),t(e.NText,{class:"go-ellipsis-1 go-ml-2",title:c.cardData.title},{default:o(()=>[y(V(c.cardData.title||""),1)]),_:1},8,["title"])]),_:1})]),i("div",dt,[i("div",ut,[t(e.NText,{depth:3,style:{"font-size":"12px"}},{default:o(()=>[y(V(e.dayjs(c.cardData.updateAt).format("YYYY-MM-DD")||""),1)]),_:1})]),i("div",mt,[t(N,null,{default:o(()=>[e.isPrivateMemberPoint?A("",!0):(m(),w("span",ft,[c.cardData.points===0?(m(),L(f,{key:0,class:"tag",size:"small",bordered:!1},{default:o(()=>a[2]||(a[2]=[i("span",null,"免费",-1)])),_:1})):(m(),L(p,{key:1,trigger:"hover",placement:"bottom","show-arrow":!1},{trigger:o(()=>[t(f,{class:"tag",size:"small",bordered:!1,type:"primary"},{default:o(()=>[a[3]||(a[3]=i("img",{src:Ke,alt:"",style:{position:"relative",top:"4px",height:"16px"}},null,-1)),i("span",pt,V(c.cardData.points),1)]),_:1})]),default:o(()=>[y(" "+V(c.cardData.points)+" 积分 ",1)]),_:1}))])),t(p,{trigger:"hover",placement:"bottom","show-arrow":!1},{trigger:o(()=>[t(e.NButton,{text:"",focusable:!1,onClick:e.editHandle},{icon:o(()=>[t(e.NIcon,null,{default:o(()=>[t(e.EditIcon)]),_:1})]),_:1})]),default:o(()=>[a[4]||(a[4]=y(" 编辑 "))]),_:1}),t(p,{trigger:"hover",placement:"bottom","show-arrow":!1},{trigger:o(()=>[t(e.NButton,{text:"",focusable:!1,onClick:e.createHandle},{icon:o(()=>[t(e.NIcon,{style:{margin:"0 5px 0 10px"}},{default:o(()=>[t(e.SendBackwardIcon)]),_:1})]),_:1})]),default:o(()=>[a[5]||(a[5]=y(" 复制 "))]),_:1}),t(p,{trigger:"hover",placement:"bottom","show-arrow":!1},{trigger:o(()=>[t(e.NButton,{text:"",focusable:!1,onClick:e.copyHandle},{icon:o(()=>[t(e.NIcon,{style:{margin:"0 5px 0 10px"}},{default:o(()=>[t(e.DownloadOutlineIcon)]),_:1})]),_:1})]),default:o(()=>[a[6]||(a[6]=y(" 导出 "))]),_:1}),t(p,{trigger:"hover",placement:"bottom","show-arrow":!1},{trigger:o(()=>[t(e.NButton,{text:"",focusable:!1,onClick:e.deleteHandle},{icon:o(()=>[t(e.NIcon,null,{default:o(()=>[t(e.TrashOutlineIcon)]),_:1})]),_:1})]),default:o(()=>[a[7]||(a[7]=y(" 删除 "))]),_:1})]),_:1})])])])]),default:o(()=>[i("div",lt,[i("div",{class:"list-content-img",onClick:e.editHandle},[c.cardData.thumbnail?(m(),L(_,{key:0,"object-fit":"contain",height:"180",src:`${c.cardData.thumbnail}?rdn=${c.cardData.updateAt}`,alt:c.cardData.title,"fallback-src":e.requireErrorImg(),"preview-disabled":""},null,8,["src","alt","fallback-src"])):(m(),w("img",{key:1,class:"default-img",src:e.requireErrorImg(),alt:"cardData.title"},null,8,rt))])])]),_:1}),t(k,{class:"go-background-filter",title:"选择创建位置",preset:"card",size:"small",style:{width:"600px"},show:e.createComponentHandleDialogShow,"onUpdate:show":a[1]||(a[1]=S=>e.createComponentHandleDialogShow=S),"transform-origin":"center",bordered:!0,"content-style":"padding: 0 0 10px;",onAfterLeave:e.closeDialogHandle},{default:o(()=>[t(B,{style:{"margin-top":"4px","margin-bottom":"0"}}),t(e.NFlex,{class:"select-create-target-box"},{default:o(()=>[t(b,{value:e.createComponentHandleDialogValue,"onUpdate:value":a[0]||(a[0]=S=>e.createComponentHandleDialogValue=S),options:e.dialogOptions,style:{flex:"1"}},null,8,["value","options"]),t(e.NButton,{type:"primary",onClick:e.createComponentHandle},{default:o(()=>[t(e.NText,{style:{"font-size":"14px"}},{default:o(()=>a[8]||(a[8]=[y("添加组件")])),_:1})]),_:1})]),_:1})]),_:1},8,["show"])])):A("",!0)}const _t=le(nt,[["render",gt],["__scopeId","data-v-e14bd675"],["__file","ItemCard.vue"]]);var xe=(v=>(v.CREATE_FILE="createFile",v.IMPOET_FILE="importFile",v))(xe||{});const yt=se({__name:"index",setup(v,{expose:a}){a(),Ve(s=>({af504406:d.value}));const c=He(),{open:e,onChange:F}=Ze({accept:"application/json",directory:!1,multiple:!1}),z=Me(),_=ge({sortKey:"updateAt",sortValue:"desc"}),D={title:"",describe:""},f={title:{required:!0,message:"请输入自定义组件名称",trigger:"input"}},p={0:et,1:tt,2:ot,3:at},N={0:Ce,1:qe,2:Je,3:Ce},{AddIcon:R,FlashOutlineIcon:B}=Z.ionicons5,{CampsiteIcon:b,ChartColumnIcon:k,OperationsRecordIcon:S}=Z.carbon,j=be(),H=E(!0),I=E(!1),n=E(!1);let u=ge(D);const h=E(0),G=E(null),{page:x,pageSize:O,bottom:J,inBottom:Q,list:T}=We(),K=[{key:"temEasy",title:"简单模板",icon:b,desc:"配置基础结构，适合随意发挥"},{key:"temECharts",title:"ECharts 模板",icon:k,desc:"配置完整案例，默认导入 ECharts 依赖"},{key:"temAction",title:"交互事件模板",icon:B,desc:"配置交互案例，结合大屏编辑器【事件-交互】使用"},{key:"temAction",title:"渲染大屏配置项案例",icon:S,desc:"大屏右侧可展示配置项（大屏中查看效果）"}],l=[{label:"创建组件",desc:"远程组件, 按需引入项目",img:$e,key:"createFile",click:()=>{re()}},{label:"导入组件",desc:"一键导入组件，轻松无忧",img:Oe,key:"importFile",click:()=>{e()}}],d=pe(()=>j.getAppTheme),P=we(),W=pe(()=>P.getTeamInfo),re=()=>{I.value=!0},Ee=s=>{h.value=s},Fe=async()=>{var C;if(h.value===-1){window.$message.warning("请选择模板！");return}const s=()=>{window.$message.error("创建失败, 请重试！"),n.value=!1};(C=G.value)==null||C.validate(async q=>{if(!(q||!u)){n.value=!0;try{const U=W.value.id,g=await _e({title:u.title,describe:u.describe,hash:p[h.value],options:N[h.value],thumbnail:"",state:0,team_id:U});if(g.code===Y.SUCCESS){if(window.$message.success("创建成功！"),u.title="",ie(),g.data.id){history.pushState({},"",window.location.href);const ae=ee(te.REMOTE_COMPONENT_EDITOR_NAME,"href");oe(`${ae}/${g.data.id}`,void 0,!0,!1,{})}}else s()}catch(U){s()}}})},M=async(s=!1)=>{H.value=!0;const{sortKey:C,sortValue:q}=_,U=W.value.id;s&&(x.value=1);const g=await Pe({page:x.value,pageSize:O.value,sortKey:C,sortValue:q,teamId:U,needUser:!0});H.value=!1,g.code===Y.SUCCESS&&(s&&(T.value=[]),g.data.data.length===0||g.data.data.length<O.value?Q.value=!0:Q.value=!1,T.value.push(...g.data.data))},De=async(s,C)=>{he({type:Xe.DELETE,center:!0,promise:!0,onPositiveCallback:async()=>{(await Ae({id:s,clear:!1})).code===Y.SUCCESS&&(window.$message.success("删除成功"),T.value.splice(C,1))}})},ke=async s=>{he({message:"是否上架组件？",center:!0,promise:!0,onPositiveCallback:async()=>{(await je(s)).code===Y.SUCCESS&&(window.$message.success("操作成功"),M())}})},Ie=async s=>{const C=document.querySelector("#go-project-content-top .n-scrollbar-container");C&&C.scrollTo({top:0}),M(!0)},ie=()=>{I.value=!1,n.value=!1,h.value=-1};F(async s=>{if(!s)return;const C=s[0];if(C.size/1024/1024>20){window.$message.error("文件大小不能超过20M");return}const U=await Le(C);let g={};try{if(g=JSON.parse(U),!g.hash)throw new Error}catch(jt){window.$message.error("导入组建格式不正确！");return}const ae=W.value.id;(await _e({title:g.title,describe:g.describe,hash:g.hash,options:g.options,thumbnail:g.thumbnail,state:0,team_id:ae})).code===Y.SUCCESS&&(M(!0),window.$message.success("创建成功！"))}),Re(()=>{ye(()=>J.value,s=>{if(s){if(x.value+=1,Q.value)return;M()}})}),ye(()=>z.getHomeSort,s=>{_.sortKey=s.sortKey,_.sortValue=s.sortValue,x.value=1,T.value=[],M(!0)},{immediate:!0});const ce={eventBus:c,openFile:e,onChangeFile:F,projectStore:z,homeSort:_,defaultData:D,rules:f,hashObj:p,templateCodeObj:N,AddIcon:R,FlashOutlineIcon:B,CampsiteIcon:b,ChartColumnIcon:k,OperationsRecordIcon:S,designStore:j,fetchDataLoading:H,showCreateModal:I,createLoading:n,get formValue(){return u},set formValue(s){u=s},selectTemplateIndex:h,formRef:G,page:x,pageSize:O,bottom:J,inBottom:Q,list:T,ListItemEnum:xe,listInfo:K,listItem:l,themeColor:d,systemStore:P,teamInfo:W,openCreateModal:re,selectTemplate:Ee,createHandle:Fe,getListData:M,deleteHandle:De,updateHandle:ke,updateListHandle:Ie,closeHandle:ie,noSideSpace:s=>s.indexOf(" ")==-1,ItemCard:_t};return Object.defineProperty(ce,"__isScriptSetup",{enumerable:!1,value:!0}),ce}}),vt={class:"go-remote-component-item"},ht={class:"create-box"},Ct=["onClick"],bt={class:"go-flex-center"},wt=["src"],St={class:"right-desc"},xt={class:"label"},Et={key:1,class:"loading-box"},Ft={key:2,class:"go-flex-center go-mt-3"},Dt={key:3,class:"go-flex-center",style:{"flex-direction":"column",margin:"100px auto"}},kt={class:"content"},It={class:"template-box"},zt=["onClick"],Nt={class:"go-flex-center template-item"};function Bt(v,a,c,e,F,z){const _=r("n-text"),D=r("n-icon"),f=r("n-grid-item"),p=r("n-grid"),N=r("n-spin"),R=r("n-divider"),B=r("n-h4"),b=r("n-form-item"),k=r("n-input"),S=r("n-button"),j=r("n-space"),H=r("n-form"),I=r("n-modal");return m(),w($,null,[i("div",vt,[i("div",ht,[t(p,{"x-gap":20,"y-gap":20,cols:"2 s:2 m:2 l:3 xl:4 xxl:4",responsive:"screen"},{default:o(()=>[(m(),w($,null,ne(e.listItem,n=>t(f,{key:n.key},{default:o(()=>[i("div",{class:"item go-flex-center go-transition-quick",onClick:n.click},[i("div",bt,[i("img",{class:"go-transition",src:n.img,alt:"创建"},null,8,wt),i("div",St,[i("div",xt,V(n.label),1),t(_,{class:"desc",depth:3},{default:o(()=>[y(V(n.desc),1)]),_:2},1024)])]),t(D,{size:"16",component:e.AddIcon},null,8,["component"])],8,Ct)]),_:2},1024)),64))]),_:1})]),e.list.length?(m(),L(p,{key:0,"x-gap":20,"y-gap":20,cols:"2 s:2 m:3 l:3 xl:4 xxl:4",responsive:"screen"},{default:o(()=>[(m(!0),w($,null,ne(e.list,(n,u)=>(m(),L(f,{key:n.id},{default:o(()=>[t(e.ItemCard,{cardData:n,index:u,onDelete:h=>e.deleteHandle(n.id,u),onUpdate:e.updateHandle,onUpdateList:e.updateListHandle},null,8,["cardData","index","onDelete"])]),_:2},1024))),128))]),_:1})):A("",!0),e.fetchDataLoading?(m(),w("div",Et,[t(N,{size:"large"})])):A("",!0),!e.fetchDataLoading&&e.list.length>12&&e.inBottom?(m(),w("div",Ft,[t(_,{depth:3},{default:o(()=>a[3]||(a[3]=[y("已经到底部啦~")])),_:1})])):A("",!0),!e.list.length&&!e.fetchDataLoading?(m(),w("div",Dt,[t(_,{depth:"3",style:{"font-size":"16px"}},{default:o(()=>a[4]||(a[4]=[y("暂无远程组件，请点击创建组件")])),_:1})])):A("",!0)]),t(I,{class:"go-create-data-base go-background-filter",title:"创建远程组件",preset:"card",size:"small",style:{width:"860px"},show:e.showCreateModal,"onUpdate:show":a[2]||(a[2]=n=>e.showCreateModal=n),"transform-origin":"center",bordered:!0,onAfterLeave:e.closeHandle},{default:o(()=>[t(R,{style:{"margin-top":"4px"}}),i("div",kt,[e.formValue?(m(),L(H,{key:0,ref:"formRef",size:"medium","label-placement":"left",model:e.formValue,"label-width":100,rules:e.rules},{default:o(()=>[t(b,null,{default:o(()=>[i("div",It,[(m(),w($,null,ne(e.listInfo,(n,u)=>i("div",{key:u,class:Qe(["template-item-box",{active:e.selectTemplateIndex===u}]),onClick:h=>e.selectTemplate(u)},[i("div",{class:"hoverBorder go-transition-quick",style:ve({borderColor:e.themeColor})},null,4),i("div",Nt,[t(D,{size:"50",depth:2,component:n.icon,color:e.selectTemplateIndex===u?e.themeColor:void 0},null,8,["component","color"]),t(B,{class:"go-mt-2",style:ve({color:e.selectTemplateIndex===u?e.themeColor:void 0})},{default:o(()=>[y(V(n.title),1)]),_:2},1032,["style"]),t(_,{depth:3,style:{"font-size":"13px"}},{default:o(()=>[y(V(n.desc),1)]),_:2},1024)])],10,zt)),64))])]),_:1}),t(b,{label:"组件名称",path:"title"},{default:o(()=>[t(k,{value:e.formValue.title,"onUpdate:value":a[0]||(a[0]=n=>e.formValue.title=n),type:"text",maxlength:"40","show-count":"",placeholder:"请输入组件名称","allow-input":e.noSideSpace},null,8,["value"])]),_:1}),t(b,{label:"功能描述",path:"describe"},{default:o(()=>[t(k,{value:e.formValue.describe,"onUpdate:value":a[1]||(a[1]=n=>e.formValue.describe=n),type:"textarea",maxlength:"1000","show-count":"",autosize:{minRows:3,maxRows:10},placeholder:"请输入功能描述"},null,8,["value"])]),_:1}),t(b,null,{default:o(()=>[t(j,{justify:"end",style:{width:"100%"}},{default:o(()=>[t(S,{type:"primary",loading:e.createLoading,onClick:e.createHandle},{default:o(()=>a[5]||(a[5]=[y("创建")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["model"])):A("",!0)])]),_:1},8,["show"])],64)}const Tt=le(yt,[["render",Bt],["__scopeId","data-v-afa1f49c"],["__file","index.vue"]]),Vt=se({__name:"remoteItem",setup(v,{expose:a}){a();const c={get Items(){return Tt}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}}),Rt={class:"go-remote-component"};function Ht(v,a,c,e,F,z){return m(),w("div",Rt,[t(e.Items)])}const go=le(Vt,[["render",Ht],["__scopeId","data-v-37c50ee6"],["__file","remoteItem.vue"]]);export{go as default};
