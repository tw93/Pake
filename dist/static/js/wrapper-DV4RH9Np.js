const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["static/js/index-BCTmwJrR.js","static/js/index-DzJUk-4s.js","static/css/index-BZJqFamK.css","static/js/querySelectorAll-CWDd-9ax.js","static/js/index-B2h3DCGB.js","static/js/plugin-BZaVEG5Y.js","static/js/icon-Bt2TghsQ.js","static/js/file-BoGdIhh5.js","static/js/systemStore-CDAOEx2u.js","static/js/index-DumZb7Zp.js","static/css/index-BZSqXE9v.css","static/js/index-YIaHLc6Z.js","static/js/fileTypeEnum-22QBGXO_.js","static/css/index-8Xm-dR8g.css","static/js/useSync.hook-CykodbHN.js","static/js/driver.js-DincbcBx.js","static/css/index-XOyNk5xN.css","static/css/driver-DB0Q8XAf.css"])))=>i.map(i=>d[i]);
var De=Object.defineProperty,Re=Object.defineProperties;var Ae=Object.getOwnPropertyDescriptors;var Q=Object.getOwnPropertySymbols;var Le=Object.prototype.hasOwnProperty,Be=Object.prototype.propertyIsEnumerable;var J=(n,t,r)=>t in n?De(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,s=(n,t)=>{for(var r in t||(t={}))Le.call(t,r)&&J(n,r,t[r]);if(Q)for(var r of Q(t))Be.call(t,r)&&J(n,r,t[r]);return n},N=(n,t)=>Re(n,Ae(t));import{_ as B,b as Fe,d as O,e as A,r as f,P as K,h as re,i as se,j as ae,k as ie,l as U,m as le,c as m,o as i,F as Y,n as ce,p as E,q as x,s as y,w as h,t as P,v as de,x as ue,y as ge,z as H,A as pe,B as Me,C as Ie,D as X,E as I,G as ye,H as Oe,I as Z,J as $,K as Ne,L as Ke,M as He,N as Ge,O as je,Q as ze,S as Ve,T as qe,U as T,V as D,W as Ue,X as M,Y as Ye,Z as Xe,$ as We,a0 as Qe}from"./index-DzJUk-4s.js";import{t as Je,u as L,a as _e,C as Ze,f as $e,b as et,c as ee,d as tt,S as ot}from"./index-B2h3DCGB.js";import{G as fe}from"./drawRemote-BVHvBcY1.js";import{l as te,G as me}from"./listen-BenKfQqv.js";import{c as nt,s as rt,a as st,g as at}from"./storage-u-tNEdAI.js";import{u as it,a as lt}from"./querySelectorAll-CWDd-9ax.js";import{i as ct}from"./icon-Bt2TghsQ.js";import{l as dt}from"./index-DumZb7Zp.js";import{_ as oe}from"./403-COCEBKg-.js";import"./plugin-BZaVEG5Y.js";import"./file-BoGdIhh5.js";import"./systemStore-CDAOEx2u.js";import"./index-YIaHLc6Z.js";import"./fileTypeEnum-22QBGXO_.js";import"./index.d-J2-cmQid.js";import"./driver.js-DincbcBx.js";const we=n=>{const t={};if(n.events.notPointerEvents&&(t.pointerEvents="none"),n.overflow)switch(n.overflow){case"hidden":t.overflow="hidden";break;case"scroll":t.overflow="scroll";break;case"auto":t.overflow="auto";break}return t},ve=(n,t)=>({left:`${n.x}px`,top:`${n.y}px`}),Ce=(n,t)=>({width:`${t?t*n.w:n.w}px`,height:`${t?t*n.h:n.h}px`}),he=n=>({display:n.hide?"none":"block"}),Se=n=>{const t={};return n&&n.overFlowHidden&&(t.overflow="hidden"),t},ne=n=>{const t=n.selectColor?{background:n.background}:{background:`url(${n.backgroundImage}) center center / 100% 100% no-repeat !important`};return s({position:"relative",width:n.width?`${n.width||100}px`:"100%",height:n.height?`${n.height}px`:"100%"},t)},ut=()=>{window.$KeyboardActive={ctrl:!1,space:!1},document.onkeydown=n=>{const{keyCode:t}=n;if(t==32&&n.target==document.body&&n.preventDefault(),[17,32].includes(t)&&window.$KeyboardActive)switch(t){case 17:window.$KeyboardActive.ctrl=!0;break;case 32:window.$KeyboardActive.space=!0;const r=document.querySelector(".go-preview");r&&r.style.position==="absolute"&&(r.style.cursor="move");break}},document.onkeyup=n=>{const{keyCode:t}=n;if(t==32&&n.target==document.body&&n.preventDefault(),[17,32].includes(t)&&window.$KeyboardActive)switch(t){case 17:window.$KeyboardActive.ctrl=!1;break;case 32:window.$KeyboardActive.space=!1;break}const r=document.querySelector(".go-preview");r&&(r.style.cursor="default")}};let V=[0,0],q=[0,0];const gt=n=>{var o,a;const t=document.querySelector(".go-preview");if(!t||t.style.position!=="absolute"||!((o=window.$KeyboardActive)!=null&&o.space))return;n.preventDefault(),n.stopPropagation(),(a=document.activeElement)==null||a.blur();const r=n.screenX,e=n.screenY,c=te(window,"mousemove",Je(d=>{const u=d.screenX-r,w=d.screenY-e,[g,v]=V,[S,C]=q;if(V=[v,u],q=[C,w],t){const G=t.style.left?Number(t.style.left.split("px")[0]):0,R=t.style.top?Number(t.style.top.split("px")[0]):0;t.style.left=G+(v>g?Math.abs(v-g):-Math.abs(v-g))+"px",t.style.top=R+(C>S?Math.abs(C-S):-Math.abs(C-S))+"px"}},20)),l=te(window,"mouseup",()=>{V=[0,0],q=[0,0],c(),l()})},pt={};function yt(n,t){return Fe(n.$slots,"default")}const Ee=B(pt,[["render",yt],["__file","EmptySlot.vue"]]),_t=O({__name:"index",props:{groupData:{type:Object,required:!0},themeSetting:{type:Object,required:!0},themeColor:{type:Object,required:!0},groupIndex:{type:Number,required:!0}},setup(n,{expose:t}){t();const r=L(),e=A(()=>r.getCurrentPage.id),c=f((window==null?void 0:window.$updateComponentKey)||{}),o={chartEditStore:r,pageId:e,updataKey:c,getComponentName:a=>{switch(a.package){case K.REMOTES:return fe;case K.THREE_MODELS:return me;default:return a.chartKey}},get animationsClass(){return le},get getFilterStyle(){return U},get getTransformStyle(){return ie},get getBlendModeStyle(){return ae},get animationsStyle(){return se},get getClipPathStyle(){return re},get getSizeStyle(){return Ce},get getComponentAttrStyle(){return ve},get getComponentSeniorAttr(){return we},get getStatusStyle(){return he},get getPreviewConfigStyle(){return Se},get useLifeHandler(){return _e},EmptySlot:Ee};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}}),ft=["id"],mt=["id"];function wt(n,t,r,e,c,l){return i(),m("div",{id:r.groupData.id,class:H(e.animationsClass(r.groupData.styles.animationsConfig)),style:E(s(s(s(s({},e.getSizeStyle(r.groupData.attr)),e.getFilterStyle(r.groupData.styles)),e.getTransformStyle(r.groupData.styles)),e.animationsStyle(r.groupData.styles.animationsConfig)))},[(i(!0),m(Y,null,ce(r.groupData.groupList,o=>(i(),m("div",{class:"chart-item",id:`id_${o.id}`,key:o.id,style:E(s(s(s(s(s(s({},e.getComponentAttrStyle(o.attr,r.groupIndex)),e.getComponentSeniorAttr(o)),e.getStatusStyle(o.status)),e.getPreviewConfigStyle(o.preview)),e.getBlendModeStyle(o.styles)),e.getTransformStyle(o.styles)))},[x("div",{class:H(e.animationsClass(o.styles.animationsConfig)),style:E(s(s({},e.animationsStyle(o.styles.animationsConfig)),e.getClipPathStyle(o.styles)))},[y(e.EmptySlot,null,{default:h(()=>{var a,d,u;return[(i(),P(de(e.getComponentName(o.chartConfig)),ue({id:o.id,key:`${e.pageId}_${o.id}_${((a=e.updataKey[o.id])==null?void 0:a.value)||new Date().getTime()}`,chartConfig:o,themeSetting:r.themeSetting,themeColor:(u=(d=o.colors)==null?void 0:d.color)!=null&&u.length?o.colors:r.themeColor,style:s(s({},e.getSizeStyle(o.attr)),e.getFilterStyle(o.styles))},ge(e.useLifeHandler(o,e.chartEditStore))),null,16,["id","chartConfig","themeSetting","themeColor","style"]))]}),_:2},1024)],6)],12,mt))),128))],14,ft)}const vt=B(_t,[["render",wt],["__scopeId","data-v-267778fe"],["__file","index.vue"]]),Ct=O({__name:"index",setup(n,{expose:t}){t();const{clearMittDataPondMap:r}=Ie(),e=L(),c={};window.$updateComponentKey={},pe(()=>e.componentList,g=>{if(!g)return;const v=e.getComponentListObject;for(let S in v)c[S]=f(new Date().getTime());window.$updateComponentKey={},window.$updateComponentKey=c},{immediate:!0,deep:!1});const l=g=>{switch(g.package){case K.REMOTES:return fe;case K.THREE_MODELS:return me;default:return g.chartKey}},o=A(()=>e.getCurrentPage.id),a=A(()=>e.editCanvasConfig.chartThemeSetting),d=A(()=>Me(e.editCanvasConfig.chartCustomThemeColorInfo)[e.editCanvasConfig.chartThemeColor]);r();const u=X();u.on(I.CHART_EDIT_SET_CURRENT_PAGE,()=>{r()}),ye(()=>{});const w={clearMittDataPondMap:r,chartEditStore:e,updataKey:c,getComponentName:l,pageId:o,themeSetting:a,themeColor:d,eventBus:u,get PreviewRenderGroup(){return vt},get animationsClass(){return le},get getFilterStyle(){return U},get getTransformStyle(){return ie},get getBlendModeStyle(){return ae},get animationsStyle(){return se},get getClipPathStyle(){return re},get getSizeStyle(){return Ce},get getComponentSeniorAttr(){return we},get getComponentAttrStyle(){return ve},get getStatusStyle(){return he},get getPreviewConfigStyle(){return Se},get useLifeHandler(){return _e},EmptySlot:Ee};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}}),ht=["id"];function St(n,t,r,e,c,l){return i(!0),m(Y,null,ce(e.chartEditStore.componentList,(o,a)=>(i(),m("div",{ref_for:!0,ref:"observeDom",class:"chart-item",id:`id_${o.id}`,key:o.id,style:E(s(s(s(s(s(s({},e.getComponentAttrStyle(o.attr,a)),e.getComponentSeniorAttr(o)),e.getStatusStyle(o.status)),e.getPreviewConfigStyle(o.preview)),e.getBlendModeStyle(o.styles)),e.getSizeStyle(o.attr)))},[o.isGroup?(i(),P(e.PreviewRenderGroup,{key:0,groupData:o,groupIndex:a,themeSetting:e.themeSetting,themeColor:e.themeColor},null,8,["groupData","groupIndex","themeSetting","themeColor"])):(i(),m("div",{key:1,style:E(s({},e.getTransformStyle(o.styles)))},[x("div",{class:H(e.animationsClass(o.styles.animationsConfig)),style:E(s(s({},e.animationsStyle(o.styles.animationsConfig)),e.getClipPathStyle(o.styles)))},[y(e.EmptySlot,null,{default:h(()=>{var d,u,w;return[(i(),P(de(e.getComponentName(o.chartConfig)),ue({id:o.id,key:`${e.pageId}_${o.id}_${((d=e.updataKey[o.id])==null?void 0:d.value)||new Date().getTime()}`,chartConfig:o,themeSetting:e.themeSetting,themeColor:(w=(u=o.colors)==null?void 0:u.color)!=null&&w.length?o.colors:e.themeColor,style:s(s({},e.getSizeStyle(o.attr)),e.getFilterStyle(o.styles))},ge(e.useLifeHandler(o,e.chartEditStore))),null,16,["id","chartConfig","themeSetting","themeColor","style"]))]}),_:2},1024)],6)],4))],12,ht))),128)}const Et=B(Ct,[["render",St],["__scopeId","data-v-612494ac"],["__file","index.vue"]]),kt=lt();L();const bt=X(),xt=n=>{const t=f(!1),r=setInterval(()=>{if(it(),window.$vue.component){clearInterval(r);const e=l=>{window.$vue.component(l.chartConfig.chartKey)||window.$vue.component(l.chartConfig.chartKey,$e(l.chartConfig))};n.pageConfig.pageList.map(l=>{l.componentList.forEach(a=>{a.isGroup?a.groupList.forEach(d=>{e(d)}):e(a)})}),setTimeout(()=>{kt.setItemUnHandle(Ze.PERCENTAGE,100),bt.emit(I.CHART_EDIT_COMPONENT_LOADED),t.value=!0},100)}},0);return{show:t}},Pt=n=>{const t=L();t.requestGlobalConfig=n[et.REQUEST_GLOBAL_CONFIG]},Tt=O({__name:"suspenseIndex",async setup(n,{expose:t}){t();let r,e;const c=dt(()=>je(()=>import("./index-BCTmwJrR.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]))),l=f(!0),o=f(!0),a=f(!0),d=f(""),u=f(!1),w=f(),g=f(),v=f({width:1,height:1}),S=f({}),C=Oe({sys:"",input:""}),{LockClosedOutlineIcon:G}=ct.ionicons5,R=X(),k=([r,e]=Z(()=>at()),r=await r,e(),r);a.value=k==null?void 0:k.unRelease,d.value=k==null?void 0:k.projectName,u.value=k==null?void 0:k.watermark;const _=L(),F=L();S.value={background:_.editCanvasConfig.background||"#232324"};const j=nt();window.go_view_pro_isPreview_hidePassword||j?(o.value=!1,j||rt()):_.editCanvasConfig.pp?(C.sys=_.editCanvasConfig.pp,o.value=!0):o.value=!1,l.value=!1;const ke=A(()=>N(s(s({},ne(_.editCanvasConfig)),U(_.editCanvasConfig)),{overflow:"hidden"})),be=A(()=>{const p=_.editCanvasConfig.previewScaleType;return p===$.SCROLL_Y||p===$.SCROLL_X});Pt(_),[r,e]=Z(()=>F.initPageFunction(_.pageConfig)),await r,e();const{show:xe}=xt(_);ye(()=>{const{scaleRef:p}=ee(_,w,g);if(v.value=p.value,u.value){const b=ne(_.editCanvasConfig);st(b)}}),R.on(I.CHART_EDIT_SET_CURRENT_PAGE,()=>{const p=document.querySelector(".go-preview");p&&(p.style.left="0px",p.style.top="0px");const{scaleRef:b}=ee(_,w,g);v.value=b.value}),qe(ot,v),ut();const Pe=()=>{C.input===He(C.sys)?(window.$message.success("密码正确!"),o.value=!1):window.$message.error("密码错误!")},z=f(!1);R.on(I.CHART_EDIT_PAGE_LOADING,(p=!0,b=750)=>{z.value=p;const Te=Ne.isNumber(window.$globalLoadingTime)?window.$globalLoadingTime:b;setTimeout(()=>{z.value=!1},Te)}),R.on(I.CHART_EDIT_COMPONENT_UPDATE_DATA,p=>{const b=F.getComponentListObject[p.id];if(!b){console.log("需要数据更新的组件不存在!");return}tt(b,_,Ke.ON_DATA_UPDATE)}),pe(()=>F.getEditCanvasConfig.cssCode,p=>{if(ze("cssCode_",!0),!p)return;const b=`cssCode_${F.getCurrentPage.id}`;Ve(p,b)},{immediate:!0});const W={TheatreLoad:c,loading:l,showPassword:o,unRelease:a,projectName:d,showWatermark:u,entityRef:w,previewRef:g,scaleInsRef:v,defaultBackground:S,passwordValue:C,LockClosedOutlineIcon:G,eventBus:R,getInfo:k,chartEditStore:_,chartEditStoreReal:F,checkPreviewHidePasswordFlagRes:j,previewRefStyle:ke,showEntity:be,show:xe,checkPassword:Pe,showLoadingBox:z,get PreviewRenderList(){return Et},get watermarkText(){return Ge},get dragCanvas(){return gt}};return Object.defineProperty(W,"__isScriptSetup",{enumerable:!1,value:!0}),W}}),Dt={key:0,class:"go-preview-unRelease"},Rt={class:"text-center"},At={key:1,class:"go-preview-password"},Lt={key:0,class:"loading-page-box"},Bt={key:1,ref:"entityRef",class:"go-preview-entity"},Ft={ref:"previewRef",class:"go-preview-scale"},Mt={key:2,ref:"previewRef",class:"go-preview-scale"};function It(n,t,r,e,c,l){const o=T("n-text"),a=T("n-h2"),d=T("n-icon"),u=T("n-input"),w=T("n-button"),g=T("n-space"),v=T("n-spin"),S=T("n-watermark");return i(),m(Y,null,[e.unRelease?(i(),m("div",Dt,[t[3]||(t[3]=x("div",{class:"text-center"},[x("img",{src:oe,alt:""})],-1)),x("div",Rt,[y(a,{class:"go-mb-1"},{default:h(()=>[y(o,{depth:2},{default:h(()=>[M("大屏【"+Ye(e.projectName)+"】暂未发布",1)]),_:1})]),_:1}),y(o,{depth:3},{default:h(()=>t[2]||(t[2]=[M("（请联系大屏创建人发布大屏）")])),_:1})])])):e.showPassword?(i(),m("div",At,[t[7]||(t[7]=x("img",{src:oe,alt:""},null,-1)),y(a,{class:"go-mb-1"},{default:h(()=>[y(o,{depth:2},{default:h(()=>t[4]||(t[4]=[M("请输入密码查看大屏")])),_:1})]),_:1}),y(o,{depth:3},{default:h(()=>t[5]||(t[5]=[M("（如果您忘记密码，请联系大屏创建者进行修改）")])),_:1}),y(g,{class:"go-mt-5"},{default:h(()=>[y(u,{value:e.passwordValue.input,"onUpdate:value":t[0]||(t[0]=C=>e.passwordValue.input=C),type:"password",placeholder:"请输入密码",style:{width:"260px"},onKeyup:Xe(e.checkPassword,["enter"])},{prefix:h(()=>[y(d,{component:e.LockClosedOutlineIcon},null,8,["component"])]),_:1},8,["value"]),y(w,{type:"primary",onClick:e.checkPassword},{default:h(()=>t[6]||(t[6]=[M("校验密码")])),_:1})]),_:1})])):D("",!0),Ue(x("div",{style:E(s({width:"100%",height:"100%"},e.defaultBackground))},[x("div",{class:H(`go-preview ${e.chartEditStore.editCanvasConfig.previewScaleType}`),onMousedown:t[1]||(t[1]=(...C)=>e.dragCanvas&&e.dragCanvas(...C))},[e.showLoadingBox?(i(),m("div",Lt,[y(v,{size:"large"})])):D("",!0),e.showEntity?(i(),m("div",Bt,[x("div",Ft,[e.show?(i(),m("div",{key:0,style:E(e.previewRefStyle)},[e.showWatermark?(i(),P(S,{key:0,id:"go-edit-watermark",content:e.watermarkText,cross:"",selectable:"","font-size":26,"line-height":26,width:500,height:300,"x-offset":12,"y-offset":80,rotate:-15,style:E(N(s({},e.previewRefStyle),{background:"none"}))},null,8,["content","style"])):D("",!0),!e.unRelease&&!e.showPassword?(i(),P(e.PreviewRenderList,{key:1})):D("",!0)],4)):D("",!0)],512)],512)):(i(),m("div",Mt,[e.show?(i(),m("div",{key:0,style:E(e.previewRefStyle)},[e.showWatermark?(i(),P(S,{key:0,id:"go-edit-watermark",content:e.watermarkText,cross:"",selectable:"","font-size":26,"line-height":26,width:500,height:300,"x-offset":12,"y-offset":80,rotate:-15,style:E(N(s({},e.previewRefStyle),{background:"none"}))},null,8,["content","style"])):D("",!0),!e.unRelease&&!e.showPassword?(i(),P(e.PreviewRenderList,{key:1})):D("",!0)],4)):D("",!0)],512))],34)],4),[[We,!e.unRelease&&!e.showPassword]]),y(e.TheatreLoad)],64)}const Ot=B(Tt,[["render",It],["__scopeId","data-v-2ca6575c"],["__file","suspenseIndex.vue"]]),Nt=O({__name:"index",setup(n,{expose:t}){t(),window.ISPREVIEW=!0;const r={suspenseIndex:Ot};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}});function Kt(n,t,r,e,c,l){return i(),P(Qe,null,{default:h(()=>[y(e.suspenseIndex)]),_:1})}const Ht=B(Nt,[["render",Kt],["__file","index.vue"]]),Gt=O({__name:"wrapper",setup(n,{expose:t}){t();let r=f(Date.now());const e={get key(){return r},set key(c){r=c},Preview:Ht};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}});function jt(n,t,r,e,c,l){return i(),P(e.Preview,{key:e.key})}const ao=B(Gt,[["render",jt],["__file","wrapper.vue"]]);export{ao as default};
